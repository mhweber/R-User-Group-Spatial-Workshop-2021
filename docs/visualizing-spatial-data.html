<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Visualizing Spatial Data | Spatial Data and Analysis in R</title>
  <meta name="description" content="This is a draft of material for the R Spatial Workshop at the EPA R User Group Meeting in September 2021." />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Visualizing Spatial Data | Spatial Data and Analysis in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a draft of material for the R Spatial Workshop at the EPA R User Group Meeting in September 2021." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Visualizing Spatial Data | Spatial Data and Analysis in R" />
  
  <meta name="twitter:description" content="This is a draft of material for the R Spatial Workshop at the EPA R User Group Meeting in September 2021." />
  

<meta name="author" content="Marc Weber" />


<meta name="date" content="2021-09-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="geoprocessing.html"/>
<link rel="next" href="extensions-to-work-with-gis-software-in-r.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script>
    $(document).ready(function () {
        process_solutions();
    });
    function process_solutions() {
        $("div.section[id^='solution']").each(function(i) {
        var soln_wrapper_id = "cvxr_ex_" + i;
        var solution_id = $(this).attr('id');
        var button = $("<button onclick=\"toggle_solution('" + soln_wrapper_id + "')\">Show/Hide</button>");
        var new_div = $("<div id='" + soln_wrapper_id + "' class='solution' style='display: none;'></div>");
        var h = $(this).first();
        var others = $(this).children().slice(1);
        $(others).each(function() {
            $(this).appendTo($(new_div));
        });
        $(button).insertAfter($(h));
        $(new_div).insertAfter($(button));
        })
    }
    function toggle_solution(el_id) {
      $("#" + el_id).toggle();
    } 
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/lesson.css" type="text/css" />
<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Spatial Data and Analysis in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#workshop-agenda"><i class="fa fa-check"></i><b>1.1</b> Workshop agenda</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#workshop-packages-and-data"><i class="fa fa-check"></i><b>1.2</b> Workshop Packages and Data</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#downloading-content-via-github"><i class="fa fa-check"></i><b>1.3</b> Downloading content via Github</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#using-rmarkdown-and-rstudio"><i class="fa fa-check"></i><b>1.4</b> Using RMarkdown and RStudio</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.5</b> Overview</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#r-basics-review"><i class="fa fa-check"></i><b>1.6</b> R Basics Review</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#spatial-data-in-r"><i class="fa fa-check"></i><b>1.7</b> Spatial Data in R</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#exercise"><i class="fa fa-check"></i><b>1.7.1</b> Exercise</a></li>
<li class="chapter" data-level="1.7.2" data-path="index.html"><a href="index.html#solution"><i class="fa fa-check"></i><b>1.7.2</b> Solution</a></li>
<li class="chapter" data-level="1.7.3" data-path="index.html"><a href="index.html#r-spatial-package-landscape"><i class="fa fa-check"></i><b>1.7.3</b> R Spatial Package Landscape</a></li>
<li class="chapter" data-level="1.7.4" data-path="index.html"><a href="index.html#exercise-1"><i class="fa fa-check"></i><b>1.7.4</b> Exercise</a></li>
<li class="chapter" data-level="1.7.5" data-path="index.html"><a href="index.html#solution-1"><i class="fa fa-check"></i><b>1.7.5</b> Solution</a></li>
<li class="chapter" data-level="1.7.6" data-path="index.html"><a href="index.html#primary-r-spatial-packages"><i class="fa fa-check"></i><b>1.7.6</b> Primary R spatial packages</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#quick-examples"><i class="fa fa-check"></i><b>1.8</b> Quick examples</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="index.html"><a href="index.html#geocoding-example-with-tmaptools-using-open-street-map"><i class="fa fa-check"></i><b>1.8.1</b> Geocoding example with tmaptools using open street map</a></li>
<li class="chapter" data-level="1.8.2" data-path="index.html"><a href="index.html#exercise-2"><i class="fa fa-check"></i><b>1.8.2</b> Exercise</a></li>
<li class="chapter" data-level="1.8.3" data-path="index.html"><a href="index.html#solution-2"><i class="fa fa-check"></i><b>1.8.3</b> Solution</a></li>
<li class="chapter" data-level="1.8.4" data-path="index.html"><a href="index.html#choropleth-map"><i class="fa fa-check"></i><b>1.8.4</b> Choropleth map</a></li>
<li class="chapter" data-level="1.8.5" data-path="index.html"><a href="index.html#interactive-mapping"><i class="fa fa-check"></i><b>1.8.5</b> Interactive mapping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html"><i class="fa fa-check"></i><b>2</b> Reading in Spatial Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#reading-in-vector-data"><i class="fa fa-check"></i><b>2.1</b> Reading in vector data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#shapefiles"><i class="fa fa-check"></i><b>2.1.1</b> Shapefiles</a></li>
<li class="chapter" data-level="2.1.2" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#geodatabases"><i class="fa fa-check"></i><b>2.1.2</b> Geodatabases</a></li>
<li class="chapter" data-level="2.1.3" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#geopackages"><i class="fa fa-check"></i><b>2.1.3</b> Geopackages</a></li>
<li class="chapter" data-level="2.1.4" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#open-spatial-data-sources"><i class="fa fa-check"></i><b>2.1.4</b> Open spatial data sources</a></li>
<li class="chapter" data-level="2.1.5" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#spatial-data-from-r-packages"><i class="fa fa-check"></i><b>2.1.5</b> Spatial data from R packages</a></li>
<li class="chapter" data-level="2.1.6" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#read-in-openstreetmap-data"><i class="fa fa-check"></i><b>2.1.6</b> Read in OpenStreetMap data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#raster-data"><i class="fa fa-check"></i><b>2.2</b> Raster data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#raster-package"><i class="fa fa-check"></i><b>2.2.1</b> <code>raster</code> package</a></li>
<li class="chapter" data-level="2.2.2" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#terra-package"><i class="fa fa-check"></i><b>2.2.2</b> <code>terra</code> package</a></li>
<li class="chapter" data-level="2.2.3" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#stars-package"><i class="fa fa-check"></i><b>2.2.3</b> <code>stars</code> package</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="reading-in-spatial-data.html"><a href="reading-in-spatial-data.html#convert-flat-files-to-spatial"><i class="fa fa-check"></i><b>2.3</b> Convert flat files to spatial</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="coordinate-reference-systems.html"><a href="coordinate-reference-systems.html"><i class="fa fa-check"></i><b>3</b> Coordinate reference systems</a>
<ul>
<li class="chapter" data-level="3.1" data-path="coordinate-reference-systems.html"><a href="coordinate-reference-systems.html#lesson-objectives"><i class="fa fa-check"></i><b>3.1</b> Lesson Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="coordinate-reference-systems.html"><a href="coordinate-reference-systems.html#what-makes-up-a-crs"><i class="fa fa-check"></i><b>3.2</b> What makes up a CRS?</a></li>
<li class="chapter" data-level="3.3" data-path="coordinate-reference-systems.html"><a href="coordinate-reference-systems.html#the-ellipsoid-and-geoid"><i class="fa fa-check"></i><b>3.3</b> The ellipsoid and geoid</a></li>
<li class="chapter" data-level="3.4" data-path="coordinate-reference-systems.html"><a href="coordinate-reference-systems.html#why-you-need-to-know-about-crs-working-with-spatial-data-in-r"><i class="fa fa-check"></i><b>3.4</b> Why you need to know about CRS working with spatial data in R:</a></li>
<li class="chapter" data-level="3.5" data-path="coordinate-reference-systems.html"><a href="coordinate-reference-systems.html#changes-to-crs-recently-in-r-in-sf"><i class="fa fa-check"></i><b>3.5</b> Changes to CRS recently in R in <code>sf</code></a></li>
<li class="chapter" data-level="3.6" data-path="coordinate-reference-systems.html"><a href="coordinate-reference-systems.html#projected-coordinate-systems"><i class="fa fa-check"></i><b>3.6</b> Projected coordinate systems</a></li>
<li class="chapter" data-level="3.7" data-path="coordinate-reference-systems.html"><a href="coordinate-reference-systems.html#exercise-5"><i class="fa fa-check"></i><b>3.7</b> Exercise</a></li>
<li class="chapter" data-level="3.8" data-path="coordinate-reference-systems.html"><a href="coordinate-reference-systems.html#solution-5"><i class="fa fa-check"></i><b>3.8</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vector-data-with-sf.html"><a href="vector-data-with-sf.html"><i class="fa fa-check"></i><b>4</b> Vector data with <code>sf</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="vector-data-with-sf.html"><a href="vector-data-with-sf.html#sf-objects"><i class="fa fa-check"></i><b>4.1</b> <code>sf</code> Objects</a></li>
<li class="chapter" data-level="4.2" data-path="vector-data-with-sf.html"><a href="vector-data-with-sf.html#sf-methods"><i class="fa fa-check"></i><b>4.2</b> <code>sf</code> Methods</a></li>
<li class="chapter" data-level="4.3" data-path="vector-data-with-sf.html"><a href="vector-data-with-sf.html#exploring-sf"><i class="fa fa-check"></i><b>4.3</b> Exploring <code>sf</code></a></li>
<li class="chapter" data-level="4.4" data-path="vector-data-with-sf.html"><a href="vector-data-with-sf.html#converting-other-object-types-to-sf"><i class="fa fa-check"></i><b>4.4</b> Converting other object types to <code>sf</code></a></li>
<li class="chapter" data-level="4.5" data-path="vector-data-with-sf.html"><a href="vector-data-with-sf.html#units-in-sf"><i class="fa fa-check"></i><b>4.5</b> Units in <code>sf</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="raster-data-1.html"><a href="raster-data-1.html"><i class="fa fa-check"></i><b>5</b> Raster data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="raster-data-1.html"><a href="raster-data-1.html#raster-data-with-terra"><i class="fa fa-check"></i><b>5.1</b> Raster data with <code>terra</code></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="raster-data-1.html"><a href="raster-data-1.html#exercise-6"><i class="fa fa-check"></i><b>5.1.1</b> Exercise</a></li>
<li class="chapter" data-level="5.1.2" data-path="raster-data-1.html"><a href="raster-data-1.html#solution-6"><i class="fa fa-check"></i><b>5.1.2</b> Solution</a></li>
<li class="chapter" data-level="5.1.3" data-path="raster-data-1.html"><a href="raster-data-1.html#manipulating-raster-objects"><i class="fa fa-check"></i><b>5.1.3</b> Manipulating <code>raster</code> objects</a></li>
<li class="chapter" data-level="5.1.4" data-path="raster-data-1.html"><a href="raster-data-1.html#reading-existing-rasters-on-disk"><i class="fa fa-check"></i><b>5.1.4</b> Reading existing rasters on disk</a></li>
<li class="chapter" data-level="5.1.5" data-path="raster-data-1.html"><a href="raster-data-1.html#multiband-rasters"><i class="fa fa-check"></i><b>5.1.5</b> Multiband rasters</a></li>
<li class="chapter" data-level="5.1.6" data-path="raster-data-1.html"><a href="raster-data-1.html#plotting-rasters-and-vectors-with-tmap"><i class="fa fa-check"></i><b>5.1.6</b> Plotting rasters and vectors with tmap</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raster-data-1.html"><a href="raster-data-1.html#raster-data-with-stars"><i class="fa fa-check"></i><b>5.2</b> Raster data with <code>stars</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="raster-data-1.html"><a href="raster-data-1.html#read-a-satellite-image"><i class="fa fa-check"></i><b>5.2.1</b> Read a satellite image</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="raster-data-1.html"><a href="raster-data-1.html#raster-operations"><i class="fa fa-check"></i><b>5.3</b> Raster Operations</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="raster-data-1.html"><a href="raster-data-1.html#projecting"><i class="fa fa-check"></i><b>5.3.1</b> Projecting</a></li>
<li class="chapter" data-level="5.3.2" data-path="raster-data-1.html"><a href="raster-data-1.html#cropping"><i class="fa fa-check"></i><b>5.3.2</b> Cropping</a></li>
<li class="chapter" data-level="5.3.3" data-path="raster-data-1.html"><a href="raster-data-1.html#map-algebra"><i class="fa fa-check"></i><b>5.3.3</b> Map Algebra</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="geoprocessing.html"><a href="geoprocessing.html"><i class="fa fa-check"></i><b>6</b> Geoprocessing</a>
<ul>
<li class="chapter" data-level="6.1" data-path="geoprocessing.html"><a href="geoprocessing.html#lesson-goals"><i class="fa fa-check"></i><b>6.1</b> Lesson Goals</a></li>
<li class="chapter" data-level="6.2" data-path="geoprocessing.html"><a href="geoprocessing.html#spatial-subsetting"><i class="fa fa-check"></i><b>6.2</b> Spatial Subsetting</a></li>
<li class="chapter" data-level="6.3" data-path="geoprocessing.html"><a href="geoprocessing.html#spatial-join"><i class="fa fa-check"></i><b>6.3</b> Spatial Join</a></li>
<li class="chapter" data-level="6.4" data-path="geoprocessing.html"><a href="geoprocessing.html#dissolve"><i class="fa fa-check"></i><b>6.4</b> Dissolve</a></li>
<li class="chapter" data-level="6.5" data-path="geoprocessing.html"><a href="geoprocessing.html#spatial-overlap"><i class="fa fa-check"></i><b>6.5</b> Spatial Overlap</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="geoprocessing.html"><a href="geoprocessing.html#next-well-create-a-dummy-spatial-polygon-file-to-compare-area-with-using-the-rmapshaper-package-to-simplify-the-border-of-the-pdx-metropolitan-polygon"><i class="fa fa-check"></i><b>6.5.1</b> Next we’ll create a dummy spatial polygon file to compare area with using the <code>rmapshaper</code> package to simplify the border of the PDX metropolitan polygon</a></li>
<li class="chapter" data-level="6.5.2" data-path="geoprocessing.html"><a href="geoprocessing.html#then-we-can-overlay-polygons-in-ggplot-to-see-how-similar-they-are-showing-the-original-census-pdx-metropolitan-area-in-green-and-new-simplified-polygon-in-red"><i class="fa fa-check"></i><b>6.5.2</b> Then we can overlay polygons in ggplot to see how similar they are, showing the original census PDX metropolitan area in green, and new simplified polygon in red</a></li>
<li class="chapter" data-level="6.5.3" data-path="geoprocessing.html"><a href="geoprocessing.html#now-that-we-have-an-original-and-simplified-polygon-to-compare-the-process-we-want-to-use-is"><i class="fa fa-check"></i><b>6.5.3</b> Now that we have an original and simplified polygon to compare, the process we want to use is:</a></li>
<li class="chapter" data-level="6.5.4" data-path="geoprocessing.html"><a href="geoprocessing.html#exercise-9"><i class="fa fa-check"></i><b>6.5.4</b> Exercise</a></li>
<li class="chapter" data-level="6.5.5" data-path="geoprocessing.html"><a href="geoprocessing.html#solution-9"><i class="fa fa-check"></i><b>6.5.5</b> Solution</a></li>
<li class="chapter" data-level="6.5.6" data-path="geoprocessing.html"><a href="geoprocessing.html#exercise-10"><i class="fa fa-check"></i><b>6.5.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="geoprocessing.html"><a href="geoprocessing.html#deriving-data-for-a-sites-or-a-watershed"><i class="fa fa-check"></i><b>6.6</b> Deriving data for a sites or a watershed</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="geoprocessing.html"><a href="geoprocessing.html#extract-using-sites"><i class="fa fa-check"></i><b>6.6.1</b> Extract using sites</a></li>
<li class="chapter" data-level="6.6.2" data-path="geoprocessing.html"><a href="geoprocessing.html#river-reaches-and-basin"><i class="fa fa-check"></i><b>6.6.2</b> River reaches and basin</a></li>
<li class="chapter" data-level="6.6.3" data-path="geoprocessing.html"><a href="geoprocessing.html#streamcat-data-for-watershed"><i class="fa fa-check"></i><b>6.6.3</b> StreamCat data for watershed</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="geoprocessing.html"><a href="geoprocessing.html#extract"><i class="fa fa-check"></i><b>6.7</b> Extract</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html"><i class="fa fa-check"></i><b>7</b> Visualizing Spatial Data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#lesson-goals-1"><i class="fa fa-check"></i><b>7.1</b> Lesson Goals</a></li>
<li class="chapter" data-level="7.2" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#tmap"><i class="fa fa-check"></i><b>7.2</b> <code>tmap</code></a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#exercise-12"><i class="fa fa-check"></i><b>7.2.1</b> Exercise</a></li>
<li class="chapter" data-level="7.2.2" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#solution-12"><i class="fa fa-check"></i><b>7.2.2</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#leaflet"><i class="fa fa-check"></i><b>7.3</b> <code>leaflet</code></a></li>
<li class="chapter" data-level="7.4" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#mapview"><i class="fa fa-check"></i><b>7.4</b> <code>mapview</code></a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#exercise-13"><i class="fa fa-check"></i><b>7.4.1</b> Exercise</a></li>
<li class="chapter" data-level="7.4.2" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#solution-13"><i class="fa fa-check"></i><b>7.4.2</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#adding-web-map-services-in-mapview"><i class="fa fa-check"></i><b>7.5</b> Adding Web Map services in <code>mapview</code></a></li>
<li class="chapter" data-level="7.6" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#ggplot2"><i class="fa fa-check"></i><b>7.6</b> <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#exercise-14"><i class="fa fa-check"></i><b>7.6.1</b> Exercise</a></li>
<li class="chapter" data-level="7.6.2" data-path="visualizing-spatial-data.html"><a href="visualizing-spatial-data.html#solution-14"><i class="fa fa-check"></i><b>7.6.2</b> Solution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="extensions-to-work-with-gis-software-in-r.html"><a href="extensions-to-work-with-gis-software-in-r.html"><i class="fa fa-check"></i><b>8</b> Extensions to work with GIS software in R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="extensions-to-work-with-gis-software-in-r.html"><a href="extensions-to-work-with-gis-software-in-r.html#rqgis"><i class="fa fa-check"></i><b>8.1</b> RQGIS</a></li>
<li class="chapter" data-level="8.2" data-path="extensions-to-work-with-gis-software-in-r.html"><a href="extensions-to-work-with-gis-software-in-r.html#r-arcgis-bridge"><i class="fa fa-check"></i><b>8.2</b> R-ArcGIS bridge</a></li>
<li class="chapter" data-level="8.3" data-path="extensions-to-work-with-gis-software-in-r.html"><a href="extensions-to-work-with-gis-software-in-r.html#accessing-python-toolbox-using-reticulate"><i class="fa fa-check"></i><b>8.3</b> Accessing Python toolbox using reticulate</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="extensions-to-work-with-gis-software-in-r.html"><a href="extensions-to-work-with-gis-software-in-r.html#access-python-objects-directly-from-r"><i class="fa fa-check"></i><b>8.3.1</b> Access Python objects directly from R</a></li>
<li class="chapter" data-level="8.3.2" data-path="extensions-to-work-with-gis-software-in-r.html"><a href="extensions-to-work-with-gis-software-in-r.html#and-share-spatial-results-from-python"><i class="fa fa-check"></i><b>8.3.2</b> And share spatial results from Python</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="extensions-to-work-with-gis-software-in-r.html"><a href="extensions-to-work-with-gis-software-in-r.html#r-whitebox-tools"><i class="fa fa-check"></i><b>8.4</b> R Whitebox Tools</a></li>
<li class="chapter" data-level="8.5" data-path="extensions-to-work-with-gis-software-in-r.html"><a href="extensions-to-work-with-gis-software-in-r.html#rgee"><i class="fa fa-check"></i><b>8.5</b> rgee</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>9</b> References</a>
<ul>
<li class="chapter" data-level="9.1" data-path="references.html"><a href="references.html#r-spatial-resources"><i class="fa fa-check"></i><b>9.1</b> R Spatial Resources</a></li>
<li class="chapter" data-level="9.2" data-path="references.html"><a href="references.html#r-vector-processing-simple-features-resources"><i class="fa fa-check"></i><b>9.2</b> R Vector Processing / Simple Features Resources</a></li>
<li class="chapter" data-level="9.3" data-path="references.html"><a href="references.html#r-raster-resources"><i class="fa fa-check"></i><b>9.3</b> R Raster Resources</a></li>
<li class="chapter" data-level="9.4" data-path="references.html"><a href="references.html#r-mapping-resources"><i class="fa fa-check"></i><b>9.4</b> R Mapping Resources</a></li>
<li class="chapter" data-level="9.5" data-path="references.html"><a href="references.html#general-r-resources"><i class="fa fa-check"></i><b>9.5</b> General R Resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/mhweber/R-User-Group-Spatial-Workshop-2021" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Spatial Data and Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualizing-spatial-data" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Visualizing Spatial Data</h1>
<div id="lesson-goals-1" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Lesson Goals</h2>
<ul>
<li>Explore several mapping libraries in R</li>
<li>Construct a couple example visualizations with spatial data in R</li>
</ul>
<p>R is fantastic for making publication quality static maps, and for generating repetitive graphics through scripts; we’ve already seen how to make simple maps using base plotting,<code>ggplot</code>, and <code>tmap</code>. There are also a number of packages in R that link R code to plotting libraries developed in Javascript (or other languages) for interactive plotting and web integration.</p>
<p>It can be hard to decide which mapping packages to learn and use - some nice advice from Martin Tennekes who created <code>tmap</code>:
- If you know some <code>ggplot</code>, don’t care about interactive maps, and don’t want to spend a lot of time learning new packages, use <code>ggplot</code>
- If you want interactive maps as flexible as possible, use <code>leaflet</code>
- If you want to simply explore spatial objects ineractively as easily as possible, use <code>mapview</code>
- Otherwise, use <code>tmap</code>!</p>
</div>
<div id="tmap" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> <code>tmap</code></h2>
<p>Load <code>tidycensus</code> - you’ll need to set your Census API key. A key can be obtained from <a href="http://api.census.gov/data/key_signup.html">here</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="visualizing-spatial-data.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf,<span class="at">quietly =</span> T)</span>
<span id="cb1-2"><a href="visualizing-spatial-data.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-3"><a href="visualizing-spatial-data.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># census_api_key(&quot;YOUR API KEY GOES HERE&quot;)</span></span></code></pre></div>
<p>Here we’ll start with a simple choropleth map of median household income in Benton county in Oregon.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="visualizing-spatial-data.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb2-2"><a href="visualizing-spatial-data.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb2-3"><a href="visualizing-spatial-data.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tigris_use_cache =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-4"><a href="visualizing-spatial-data.html#cb2-4" aria-hidden="true" tabindex="-1"></a>benton_tracts <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(<span class="at">state =</span> <span class="st">&#39;OR&#39;</span>, <span class="at">county =</span> <span class="st">&#39;Benton&#39;</span>, <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb2-5"><a href="visualizing-spatial-data.html#cb2-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">variables =</span> <span class="st">&quot;B19013_001&quot;</span>, <span class="at">geometry =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-6"><a href="visualizing-spatial-data.html#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="visualizing-spatial-data.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename a column</span></span>
<span id="cb2-8"><a href="visualizing-spatial-data.html#cb2-8" aria-hidden="true" tabindex="-1"></a>benton_tracts <span class="ot">&lt;-</span> benton_tracts <span class="sc">%&gt;%</span> </span>
<span id="cb2-9"><a href="visualizing-spatial-data.html#cb2-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">MedianIncome=</span>estimate)</span>
<span id="cb2-10"><a href="visualizing-spatial-data.html#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(benton_tracts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;MedianIncome&quot;</span>)</span></code></pre></div>
<p><img src="R-User-Group-Spatial-Workshop-2021_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>That’s a pretty basic map - we can adjust a number of settings:
- breaks: we can set different breaks for our map
- n: we can control the number of bins
- palette: we can change the color palette</p>
<p>These are just a few - let’s play with those to start.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="visualizing-spatial-data.html#cb3-1" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">80</span>, <span class="dv">120</span>, <span class="dv">140</span>) <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb3-2"><a href="visualizing-spatial-data.html#cb3-2" aria-hidden="true" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(benton_tracts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;MedianIncome&quot;</span>, <span class="at">breaks=</span>breaks)</span>
<span id="cb3-3"><a href="visualizing-spatial-data.html#cb3-3" aria-hidden="true" tabindex="-1"></a>t2 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(benton_tracts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;MedianIncome&quot;</span>, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb3-4"><a href="visualizing-spatial-data.html#cb3-4" aria-hidden="true" tabindex="-1"></a>t3 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(benton_tracts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;MedianIncome&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;BuGn&quot;</span>)</span>
<span id="cb3-5"><a href="visualizing-spatial-data.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(t1, t2, t3, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="R-User-Group-Spatial-Workshop-2021_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p><code>tmap</code> also has <code>view</code> mode which can be handy</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="visualizing-spatial-data.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;view&quot;</span>)</span>
<span id="cb4-2"><a href="visualizing-spatial-data.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(benton_tracts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;MedianIncome&quot;</span>)</span></code></pre></div>
<p>We can make multi-layered maps (shout out to Amalia Handler who used this in <code>tmap</code> demo for our lab group)</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="visualizing-spatial-data.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb5-2"><a href="visualizing-spatial-data.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(World, metro, rivers, land)</span>
<span id="cb5-3"><a href="visualizing-spatial-data.html#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="visualizing-spatial-data.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set to static mode</span></span>
<span id="cb5-5"><a href="visualizing-spatial-data.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb5-6"><a href="visualizing-spatial-data.html#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="visualizing-spatial-data.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Make map that is multilayered</span></span>
<span id="cb5-8"><a href="visualizing-spatial-data.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(land) <span class="sc">+</span></span>
<span id="cb5-9"><a href="visualizing-spatial-data.html#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_raster</span>(<span class="st">&quot;elevation&quot;</span>, <span class="at">palette =</span> <span class="fu">terrain.colors</span>(<span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb5-10"><a href="visualizing-spatial-data.html#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(World) <span class="sc">+</span></span>
<span id="cb5-11"><a href="visualizing-spatial-data.html#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="st">&quot;white&quot;</span>, <span class="at">lwd =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb5-12"><a href="visualizing-spatial-data.html#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_text</span>(<span class="st">&quot;iso_a3&quot;</span>, <span class="at">size =</span> <span class="st">&quot;AREA&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-13"><a href="visualizing-spatial-data.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(metro) <span class="sc">+</span></span>
<span id="cb5-14"><a href="visualizing-spatial-data.html#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_symbols</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="st">&quot;pop2020&quot;</span>, <span class="at">scale =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb5-15"><a href="visualizing-spatial-data.html#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_legend</span>(<span class="at">show =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="R-User-Group-Spatial-Workshop-2021_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>We can make faceted maps with <code>tmap</code></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="visualizing-spatial-data.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set mode to interactive</span></span>
<span id="cb6-2"><a href="visualizing-spatial-data.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;view&quot;</span>)</span>
<span id="cb6-3"><a href="visualizing-spatial-data.html#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="visualizing-spatial-data.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot it out</span></span>
<span id="cb6-5"><a href="visualizing-spatial-data.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(World) <span class="sc">+</span></span>
<span id="cb6-6"><a href="visualizing-spatial-data.html#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="fu">c</span>(<span class="st">&quot;pop_est&quot;</span>, <span class="st">&quot;HPI&quot;</span>,<span class="st">&quot;life_exp&quot;</span>,<span class="st">&quot;well_being&quot;</span>)) <span class="sc">+</span></span>
<span id="cb6-7"><a href="visualizing-spatial-data.html#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_facets</span>(<span class="at">sync =</span> <span class="cn">TRUE</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>We can again plot our elevation and Crater Lake boundary data in <code>tmap</code> as we did in the <a href="https://mhweber.github.io/R-User-Group-Spatial-Workshop-2021/raster-data-1.html#plotting-rasters-and-vectors-with-tmap">Raster Section</a>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="visualizing-spatial-data.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Rspatialworkshop)</span>
<span id="cb7-2"><a href="visualizing-spatial-data.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb7-3"><a href="visualizing-spatial-data.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(CraterLake)</span>
<span id="cb7-4"><a href="visualizing-spatial-data.html#cb7-4" aria-hidden="true" tabindex="-1"></a>raster_filepath <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;elevation.tif&quot;</span>, <span class="at">package =</span> <span class="st">&quot;Rspatialworkshop&quot;</span>)</span>
<span id="cb7-5"><a href="visualizing-spatial-data.html#cb7-5" aria-hidden="true" tabindex="-1"></a>elevation <span class="ot">&lt;-</span> <span class="fu">rast</span>(raster_filepath)</span>
<span id="cb7-6"><a href="visualizing-spatial-data.html#cb7-6" aria-hidden="true" tabindex="-1"></a>elevation <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">mask</span>(elevation, <span class="fu">vect</span>(CraterLake))</span>
<span id="cb7-7"><a href="visualizing-spatial-data.html#cb7-7" aria-hidden="true" tabindex="-1"></a>elevation <span class="ot">&lt;-</span> <span class="fu">project</span>(elevation, <span class="st">&#39;+proj=utm +zone=10 +ellps=GRS80 +units=m +no_defs&#39;</span>)</span>
<span id="cb7-8"><a href="visualizing-spatial-data.html#cb7-8" aria-hidden="true" tabindex="-1"></a>CraterLake <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(CraterLake, <span class="st">&#39;+proj=utm +zone=10 +ellps=GRS80 +units=m +no_defs&#39;</span>)</span>
<span id="cb7-9"><a href="visualizing-spatial-data.html#cb7-9" aria-hidden="true" tabindex="-1"></a>map_crlk <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(CraterLake) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb7-10"><a href="visualizing-spatial-data.html#cb7-10" aria-hidden="true" tabindex="-1"></a>map_crlkel <span class="ot">=</span> map_crlk <span class="sc">+</span></span>
<span id="cb7-11"><a href="visualizing-spatial-data.html#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(elevation) <span class="sc">+</span> <span class="fu">tm_raster</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>,<span class="at">palette =</span> <span class="fu">terrain.colors</span>(<span class="dv">12</span>)) <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>,<span class="st">&quot;bottom&quot;</span>),</span>
<span id="cb7-12"><a href="visualizing-spatial-data.html#cb7-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.width =</span> <span class="dv">1</span>)</span>
<span id="cb7-13"><a href="visualizing-spatial-data.html#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="visualizing-spatial-data.html#cb7-14" aria-hidden="true" tabindex="-1"></a>map_crlkel</span></code></pre></div>
<div id="exercise-12" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Exercise</h3>
<p>Look at some of the links in the <code>tmap</code> <a href="https://github.com/r-tmap/tmap/#reference">GitHub repository</a> and specifically <a href="https://cran.r-project.org/web/packages/tmap/vignettes/tmap-getstarted.html">tmap: get started!</a> and see what modifications to plotting elevation and the Crater Lake park boundary you can come up with</p>
</div>
<div id="solution-12" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Solution</h3>
<p>Just an example incorporating a number of settings available in <code>tmap</code> to produce cartographic output</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="visualizing-spatial-data.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(elevation) <span class="sc">+</span></span>
<span id="cb8-2"><a href="visualizing-spatial-data.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">title =</span> <span class="st">&quot;Elevation&quot;</span>, </span>
<span id="cb8-3"><a href="visualizing-spatial-data.html#cb8-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">style =</span> <span class="st">&quot;cont&quot;</span>,</span>
<span id="cb8-4"><a href="visualizing-spatial-data.html#cb8-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="st">&quot;-Spectral&quot;</span>) <span class="sc">+</span></span>
<span id="cb8-5"><a href="visualizing-spatial-data.html#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(CraterLake) <span class="sc">+</span></span>
<span id="cb8-6"><a href="visualizing-spatial-data.html#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb8-7"><a href="visualizing-spatial-data.html#cb8-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">lwd =</span> <span class="dv">1</span>)<span class="sc">+</span> </span>
<span id="cb8-8"><a href="visualizing-spatial-data.html#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">20</span>),</span>
<span id="cb8-9"><a href="visualizing-spatial-data.html#cb8-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">text.size =</span> .<span class="dv">5</span>,</span>
<span id="cb8-10"><a href="visualizing-spatial-data.html#cb8-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>)) <span class="sc">+</span></span>
<span id="cb8-11"><a href="visualizing-spatial-data.html#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">n.x =</span> <span class="dv">4</span>, <span class="at">n.y =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb8-12"><a href="visualizing-spatial-data.html#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;top&quot;</span>), </span>
<span id="cb8-13"><a href="visualizing-spatial-data.html#cb8-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">type =</span> <span class="st">&quot;arrow&quot;</span>, </span>
<span id="cb8-14"><a href="visualizing-spatial-data.html#cb8-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">1.5</span>)</span></code></pre></div>
</div>
</div>
<div id="leaflet" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> <code>leaflet</code></h2>
<p><a href="https://leafletjs.com/">Leaflet</a> is an extremely popular open-source javascript library for interactive web mapping, and the <code>leaflet</code> R package allows R users to create Leaflet maps from R. <code>Leaflet</code> can plot <code>sf</code> or <code>sp</code> objects, or x / y coordinates, and can plot points, lines or polygons. There are a number of <a href="http://leaflet-extras.github.io/leaflet-providers/preview/index.html">base layers you can choose from</a>. It’s worth spending some time exploring the excellent <a href="https://rstudio.github.io/leaflet/">Leaflet for R site</a>.</p>
<p>Here we make the simplest of leaflet maps:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="visualizing-spatial-data.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb9-2"><a href="visualizing-spatial-data.html#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="visualizing-spatial-data.html#cb9-3" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="visualizing-spatial-data.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span>  <span class="co"># Add default OpenStreetMap map tiles</span></span>
<span id="cb9-5"><a href="visualizing-spatial-data.html#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lng=</span><span class="sc">-</span><span class="fl">123.26720</span>, <span class="at">lat=</span><span class="fl">44.5810</span>, <span class="at">popup=</span><span class="st">&quot;Here&#39;s my house&quot;</span>)</span>
<span id="cb9-6"><a href="visualizing-spatial-data.html#cb9-6" aria-hidden="true" tabindex="-1"></a>m  <span class="co"># Print the map</span></span></code></pre></div>
<div id="htmlwidget-6a18be11e6bfb812191f" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-6a18be11e6bfb812191f">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[44.581,-123.2672,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"Here's my house",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[44.581,44.581],"lng":[-123.2672,-123.2672]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="mapview" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> <code>mapview</code></h2>
<p><a href="https://r-spatial.github.io/mapview/index.html">Mapview</a> is a package designed for quick and easy interactive visualizations of spatial data - it makes use of <code>leaflet</code> but simplifies mapping functions compared to the <code>leaflet</code> package.</p>
<p>It’s easy to layer features with <code>mapview</code> - you can supply a list of objects to <code>mapview</code> or use + syntax as with <code>ggplot</code>.</p>
<p>Here we plot gages within Benton County:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="visualizing-spatial-data.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Rspatialworkshop)</span>
<span id="cb10-2"><a href="visualizing-spatial-data.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview)</span>
<span id="cb10-3"><a href="visualizing-spatial-data.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb10-4"><a href="visualizing-spatial-data.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb10-5"><a href="visualizing-spatial-data.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb10-6"><a href="visualizing-spatial-data.html#cb10-6" aria-hidden="true" tabindex="-1"></a>counties <span class="ot">&lt;-</span> <span class="fu">counties</span>(<span class="st">&quot;Oregon&quot;</span>, <span class="at">cb =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-7"><a href="visualizing-spatial-data.html#cb10-7" aria-hidden="true" tabindex="-1"></a>benton <span class="ot">&lt;-</span> counties[counties<span class="sc">$</span>NAME<span class="sc">==</span><span class="st">&#39;Benton&#39;</span>,]</span>
<span id="cb10-8"><a href="visualizing-spatial-data.html#cb10-8" aria-hidden="true" tabindex="-1"></a>fpath <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;Gages_flowdata.csv&quot;</span>, <span class="at">package=</span><span class="st">&quot;Rspatialworkshop&quot;</span>)</span>
<span id="cb10-9"><a href="visualizing-spatial-data.html#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="visualizing-spatial-data.html#cb10-10" aria-hidden="true" tabindex="-1"></a>gages <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(fpath,<span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb10-11"><a href="visualizing-spatial-data.html#cb10-11" aria-hidden="true" tabindex="-1"></a>gages_sf <span class="ot">&lt;-</span> gages <span class="sc">%&gt;%</span></span>
<span id="cb10-12"><a href="visualizing-spatial-data.html#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;LON_SITE&quot;</span>, <span class="st">&quot;LAT_SITE&quot;</span>), <span class="at">crs =</span> <span class="dv">4269</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) </span>
<span id="cb10-13"><a href="visualizing-spatial-data.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(gages_sf)<span class="sc">==</span><span class="fu">st_crs</span>(benton)</span>
<span id="cb10-14"><a href="visualizing-spatial-data.html#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># remember spatial indexing?</span></span>
<span id="cb10-15"><a href="visualizing-spatial-data.html#cb10-15" aria-hidden="true" tabindex="-1"></a>gages_benton <span class="ot">&lt;-</span> gages_sf[benton,]</span>
<span id="cb10-16"><a href="visualizing-spatial-data.html#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(gages_benton) <span class="sc">+</span> benton</span></code></pre></div>
<div id="exercise-13" class="section level3" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Exercise</h3>
<p>Glance through the <a href="https://r-spatial.github.io/mapview/articles/articles/mapview_01-basics.html"><code>mapview</code> basics</a> and adjust legend and attributes. Take a look at <a href="https://r-spatial.github.io/mapview/articles/articles/mapview_02-advanced.html"><code>mapview</code> advanced controls</a> as well and try plotting stations and the county polygon together, this time modifying features such as thicker black outline and transparent fill for the county outline and colorizing gages by their average flow (‘AVE’).</p>
</div>
<div id="solution-13" class="section level3" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Solution</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="visualizing-spatial-data.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(gages_benton,<span class="at">zcol=</span><span class="st">&#39;AVE&#39;</span>) <span class="sc">+</span> <span class="fu">mapview</span>(benton, <span class="at">alpha.regions=</span>.<span class="dv">07</span>, <span class="at">color=</span><span class="st">&#39;black&#39;</span>, <span class="at">lwd=</span><span class="dv">2</span>)</span></code></pre></div>
<div id="htmlwidget-1e3c389fc6709eee9388" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1e3c389fc6709eee9388">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[44.3129,44.716229,44.526232,44.501231,44.497066,44.379009,44.36512],[-123.296485,-123.503993,-123.334545,-123.440102,-123.330378,-123.59566,-123.599827],6,null,"gages_benton - AVE",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"fill":true,"fillColor":["#FDE333","#353E7C","#009B95","#4B0055","#353E7C","#007094","#353E7C"],"fillOpacity":[0.6,0.6,0.6,0.6,0.6,0.6,0.6]},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>FID_&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>2<\/td><th>COMID&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>3<\/td><th>EVENTDATE&emsp;<\/th><td>11/21/2006 0:00:00&emsp;<\/td><\/tr><tr><td>4<\/td><th>REACHCODE&emsp;<\/th><td>1.709000e+13&emsp;<\/td><\/tr><tr><td>5<\/td><th>REACHSMDAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>6<\/td><th>REACHRESOL&emsp;<\/th><td>medium&emsp;<\/td><\/tr><tr><td>7<\/td><th>FEATURECOM&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>8<\/td><th>FEATURECLA&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>9<\/td><th>SOURCE_ORI&emsp;<\/th><td>USGS, Water Resources Division&emsp;<\/td><\/tr><tr><td>10<\/td><th>SOURCE_DAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>11<\/td><th>SOURCE_FEA&emsp;<\/th><td>14170000&emsp;<\/td><\/tr><tr><td>12<\/td><th>FEATUREDET&emsp;<\/th><td>http://waterdata.usgs.gov/nwis/nwisman/?site_no=14170000&emsp;<\/td><\/tr><tr><td>13<\/td><th>MEASURE&emsp;<\/th><td>89.87046&emsp;<\/td><\/tr><tr><td>14<\/td><th>OFFSET&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>15<\/td><th>EVENTTYPE&emsp;<\/th><td>StreamGage&emsp;<\/td><\/tr><tr><td>16<\/td><th>AGENCY_CD&emsp;<\/th><td>USGS&emsp;<\/td><\/tr><tr><td>17<\/td><th>STATION_NM&emsp;<\/th><td>LONG TOM RIVER AT MONROE, OR&emsp;<\/td><\/tr><tr><td>18<\/td><th>STATE_CD&emsp;<\/th><td>41&emsp;<\/td><\/tr><tr><td>19<\/td><th>STATE&emsp;<\/th><td>OR&emsp;<\/td><\/tr><tr><td>20<\/td><th>SITESTATUS&emsp;<\/th><td>A&emsp;<\/td><\/tr><tr><td>21<\/td><th>DA_SQ_MILE&emsp;<\/th><td>391.0&emsp;<\/td><\/tr><tr><td>22<\/td><th>LON_SITE&emsp;<\/th><td>-123.2965&emsp;<\/td><\/tr><tr><td>23<\/td><th>LAT_SITE&emsp;<\/th><td>44.31290&emsp;<\/td><\/tr><tr><td>24<\/td><th>LON_NHD&emsp;<\/th><td>-123.2960&emsp;<\/td><\/tr><tr><td>25<\/td><th>LAT_NHD&emsp;<\/th><td>44.31291&emsp;<\/td><\/tr><tr><td>26<\/td><th>NHD2GAGE_D&emsp;<\/th><td> 41.894&emsp;<\/td><\/tr><tr><td>27<\/td><th>REVIEWED&emsp;<\/th><td>Y&emsp;<\/td><\/tr><tr><td>28<\/td><th>BFIYRS&emsp;<\/th><td>80&emsp;<\/td><\/tr><tr><td>29<\/td><th>BFI_AVE&emsp;<\/th><td>0.411&emsp;<\/td><\/tr><tr><td>30<\/td><th>BFI_STDEV&emsp;<\/th><td>0.090&emsp;<\/td><\/tr><tr><td>31<\/td><th>GOTBFI&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>32<\/td><th>DAY1&emsp;<\/th><td>19211001&emsp;<\/td><\/tr><tr><td>33<\/td><th>DAYN&emsp;<\/th><td>20040930&emsp;<\/td><\/tr><tr><td>34<\/td><th>NDAYS&emsp;<\/th><td>29433&emsp;<\/td><\/tr><tr><td>35<\/td><th>NDAYSGT0&emsp;<\/th><td>29431&emsp;<\/td><\/tr><tr><td>36<\/td><th>MIN_&emsp;<\/th><td> 0.0&emsp;<\/td><\/tr><tr><td>37<\/td><th>P1&emsp;<\/th><td>14.0&emsp;<\/td><\/tr><tr><td>38<\/td><th>P5&emsp;<\/th><td>24.0&emsp;<\/td><\/tr><tr><td>39<\/td><th>P10&emsp;<\/th><td>32.0&emsp;<\/td><\/tr><tr><td>40<\/td><th>P20&emsp;<\/th><td>44.0&emsp;<\/td><\/tr><tr><td>41<\/td><th>P25&emsp;<\/th><td>54.0&emsp;<\/td><\/tr><tr><td>42<\/td><th>P30&emsp;<\/th><td>67.0&emsp;<\/td><\/tr><tr><td>43<\/td><th>P40&emsp;<\/th><td>120.00&emsp;<\/td><\/tr><tr><td>44<\/td><th>P50&emsp;<\/th><td>214&emsp;<\/td><\/tr><tr><td>45<\/td><th>P60&emsp;<\/th><td>375.0&emsp;<\/td><\/tr><tr><td>46<\/td><th>P70&emsp;<\/th><td>676.0&emsp;<\/td><\/tr><tr><td>47<\/td><th>P75&emsp;<\/th><td>859.50&emsp;<\/td><\/tr><tr><td>48<\/td><th>P80&emsp;<\/th><td>1100&emsp;<\/td><\/tr><tr><td>49<\/td><th>P90&emsp;<\/th><td>2300.0&emsp;<\/td><\/tr><tr><td>50<\/td><th>P95&emsp;<\/th><td>3653.0&emsp;<\/td><\/tr><tr><td>51<\/td><th>P99&emsp;<\/th><td>5340&emsp;<\/td><\/tr><tr><td>52<\/td><th>MAX_&emsp;<\/th><td>16400&emsp;<\/td><\/tr><tr><td>53<\/td><th>AVE&emsp;<\/th><td>752.922&emsp;<\/td><\/tr><tr><td>54<\/td><th>STDEV_&emsp;<\/th><td>1240.054&emsp;<\/td><\/tr><tr><td>55<\/td><th>GOTQ&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>56<\/td><th>HUC&emsp;<\/th><td>17090003&emsp;<\/td><\/tr><tr><td>57<\/td><th>HUC_REG&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>58<\/td><th>SUBREGION&emsp;<\/th><td>1709&emsp;<\/td><\/tr><tr><td>59<\/td><th>ACCOUNTING&emsp;<\/th><td>170900&emsp;<\/td><\/tr><tr><td>60<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>FID_&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>2<\/td><th>COMID&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>3<\/td><th>EVENTDATE&emsp;<\/th><td>11/21/2006 0:00:00&emsp;<\/td><\/tr><tr><td>4<\/td><th>REACHCODE&emsp;<\/th><td>1.709000e+13&emsp;<\/td><\/tr><tr><td>5<\/td><th>REACHSMDAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>6<\/td><th>REACHRESOL&emsp;<\/th><td>medium&emsp;<\/td><\/tr><tr><td>7<\/td><th>FEATURECOM&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>8<\/td><th>FEATURECLA&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>9<\/td><th>SOURCE_ORI&emsp;<\/th><td>USGS, Water Resources Division&emsp;<\/td><\/tr><tr><td>10<\/td><th>SOURCE_DAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>11<\/td><th>SOURCE_FEA&emsp;<\/th><td>14189500&emsp;<\/td><\/tr><tr><td>12<\/td><th>FEATUREDET&emsp;<\/th><td>http://waterdata.usgs.gov/nwis/nwisman/?site_no=14189500&emsp;<\/td><\/tr><tr><td>13<\/td><th>MEASURE&emsp;<\/th><td>71.92977&emsp;<\/td><\/tr><tr><td>14<\/td><th>OFFSET&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>15<\/td><th>EVENTTYPE&emsp;<\/th><td>StreamGage&emsp;<\/td><\/tr><tr><td>16<\/td><th>AGENCY_CD&emsp;<\/th><td>USGS&emsp;<\/td><\/tr><tr><td>17<\/td><th>STATION_NM&emsp;<\/th><td>LUCKIAMUTE RIVER NEAR HOSKINS, OREG.&emsp;<\/td><\/tr><tr><td>18<\/td><th>STATE_CD&emsp;<\/th><td>41&emsp;<\/td><\/tr><tr><td>19<\/td><th>STATE&emsp;<\/th><td>OR&emsp;<\/td><\/tr><tr><td>20<\/td><th>SITESTATUS&emsp;<\/th><td>I&emsp;<\/td><\/tr><tr><td>21<\/td><th>DA_SQ_MILE&emsp;<\/th><td> 34.3&emsp;<\/td><\/tr><tr><td>22<\/td><th>LON_SITE&emsp;<\/th><td>-123.5040&emsp;<\/td><\/tr><tr><td>23<\/td><th>LAT_SITE&emsp;<\/th><td>44.71623&emsp;<\/td><\/tr><tr><td>24<\/td><th>LON_NHD&emsp;<\/th><td>-123.5030&emsp;<\/td><\/tr><tr><td>25<\/td><th>LAT_NHD&emsp;<\/th><td>44.71849&emsp;<\/td><\/tr><tr><td>26<\/td><th>NHD2GAGE_D&emsp;<\/th><td>262.727&emsp;<\/td><\/tr><tr><td>27<\/td><th>REVIEWED&emsp;<\/th><td>Y&emsp;<\/td><\/tr><tr><td>28<\/td><th>BFIYRS&emsp;<\/th><td>44&emsp;<\/td><\/tr><tr><td>29<\/td><th>BFI_AVE&emsp;<\/th><td>0.460&emsp;<\/td><\/tr><tr><td>30<\/td><th>BFI_STDEV&emsp;<\/th><td>0.057&emsp;<\/td><\/tr><tr><td>31<\/td><th>GOTBFI&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>32<\/td><th>DAY1&emsp;<\/th><td>19340501&emsp;<\/td><\/tr><tr><td>33<\/td><th>DAYN&emsp;<\/th><td>19780930&emsp;<\/td><\/tr><tr><td>34<\/td><th>NDAYS&emsp;<\/th><td>16224&emsp;<\/td><\/tr><tr><td>35<\/td><th>NDAYSGT0&emsp;<\/th><td>16224&emsp;<\/td><\/tr><tr><td>36<\/td><th>MIN_&emsp;<\/th><td> 4.7&emsp;<\/td><\/tr><tr><td>37<\/td><th>P1&emsp;<\/th><td> 8.0&emsp;<\/td><\/tr><tr><td>38<\/td><th>P5&emsp;<\/th><td>10.0&emsp;<\/td><\/tr><tr><td>39<\/td><th>P10&emsp;<\/th><td>13.0&emsp;<\/td><\/tr><tr><td>40<\/td><th>P20&emsp;<\/th><td>18.0&emsp;<\/td><\/tr><tr><td>41<\/td><th>P25&emsp;<\/th><td>23.0&emsp;<\/td><\/tr><tr><td>42<\/td><th>P30&emsp;<\/th><td>30.0&emsp;<\/td><\/tr><tr><td>43<\/td><th>P40&emsp;<\/th><td> 52.00&emsp;<\/td><\/tr><tr><td>44<\/td><th>P50&emsp;<\/th><td> 86&emsp;<\/td><\/tr><tr><td>45<\/td><th>P60&emsp;<\/th><td>141.0&emsp;<\/td><\/tr><tr><td>46<\/td><th>P70&emsp;<\/th><td>209.0&emsp;<\/td><\/tr><tr><td>47<\/td><th>P75&emsp;<\/th><td>256.00&emsp;<\/td><\/tr><tr><td>48<\/td><th>P80&emsp;<\/th><td> 317&emsp;<\/td><\/tr><tr><td>49<\/td><th>P90&emsp;<\/th><td> 537.0&emsp;<\/td><\/tr><tr><td>50<\/td><th>P95&emsp;<\/th><td> 808.0&emsp;<\/td><\/tr><tr><td>51<\/td><th>P99&emsp;<\/th><td>1540&emsp;<\/td><\/tr><tr><td>52<\/td><th>MAX_&emsp;<\/th><td> 4580&emsp;<\/td><\/tr><tr><td>53<\/td><th>AVE&emsp;<\/th><td>207.073&emsp;<\/td><\/tr><tr><td>54<\/td><th>STDEV_&emsp;<\/th><td> 318.655&emsp;<\/td><\/tr><tr><td>55<\/td><th>GOTQ&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>56<\/td><th>HUC&emsp;<\/th><td>17090003&emsp;<\/td><\/tr><tr><td>57<\/td><th>HUC_REG&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>58<\/td><th>SUBREGION&emsp;<\/th><td>1709&emsp;<\/td><\/tr><tr><td>59<\/td><th>ACCOUNTING&emsp;<\/th><td>170900&emsp;<\/td><\/tr><tr><td>60<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>FID_&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>2<\/td><th>COMID&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>3<\/td><th>EVENTDATE&emsp;<\/th><td>11/21/2006 0:00:00&emsp;<\/td><\/tr><tr><td>4<\/td><th>REACHCODE&emsp;<\/th><td>1.709000e+13&emsp;<\/td><\/tr><tr><td>5<\/td><th>REACHSMDAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>6<\/td><th>REACHRESOL&emsp;<\/th><td>medium&emsp;<\/td><\/tr><tr><td>7<\/td><th>FEATURECOM&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>8<\/td><th>FEATURECLA&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>9<\/td><th>SOURCE_ORI&emsp;<\/th><td>USGS, Water Resources Division&emsp;<\/td><\/tr><tr><td>10<\/td><th>SOURCE_DAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>11<\/td><th>SOURCE_FEA&emsp;<\/th><td>14171000&emsp;<\/td><\/tr><tr><td>12<\/td><th>FEATUREDET&emsp;<\/th><td>http://waterdata.usgs.gov/nwis/nwisman/?site_no=14171000&emsp;<\/td><\/tr><tr><td>13<\/td><th>MEASURE&emsp;<\/th><td>79.35403&emsp;<\/td><\/tr><tr><td>14<\/td><th>OFFSET&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>15<\/td><th>EVENTTYPE&emsp;<\/th><td>StreamGage&emsp;<\/td><\/tr><tr><td>16<\/td><th>AGENCY_CD&emsp;<\/th><td>USGS&emsp;<\/td><\/tr><tr><td>17<\/td><th>STATION_NM&emsp;<\/th><td>MARYS RIVER NEAR PHILOMATH, OR&emsp;<\/td><\/tr><tr><td>18<\/td><th>STATE_CD&emsp;<\/th><td>41&emsp;<\/td><\/tr><tr><td>19<\/td><th>STATE&emsp;<\/th><td>OR&emsp;<\/td><\/tr><tr><td>20<\/td><th>SITESTATUS&emsp;<\/th><td>A&emsp;<\/td><\/tr><tr><td>21<\/td><th>DA_SQ_MILE&emsp;<\/th><td>159.0&emsp;<\/td><\/tr><tr><td>22<\/td><th>LON_SITE&emsp;<\/th><td>-123.3345&emsp;<\/td><\/tr><tr><td>23<\/td><th>LAT_SITE&emsp;<\/th><td>44.52623&emsp;<\/td><\/tr><tr><td>24<\/td><th>LON_NHD&emsp;<\/th><td>-123.3345&emsp;<\/td><\/tr><tr><td>25<\/td><th>LAT_NHD&emsp;<\/th><td>44.52500&emsp;<\/td><\/tr><tr><td>26<\/td><th>NHD2GAGE_D&emsp;<\/th><td>136.938&emsp;<\/td><\/tr><tr><td>27<\/td><th>REVIEWED&emsp;<\/th><td>Y&emsp;<\/td><\/tr><tr><td>28<\/td><th>BFIYRS&emsp;<\/th><td>49&emsp;<\/td><\/tr><tr><td>29<\/td><th>BFI_AVE&emsp;<\/th><td>0.443&emsp;<\/td><\/tr><tr><td>30<\/td><th>BFI_STDEV&emsp;<\/th><td>0.077&emsp;<\/td><\/tr><tr><td>31<\/td><th>GOTBFI&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>32<\/td><th>DAY1&emsp;<\/th><td>19401001&emsp;<\/td><\/tr><tr><td>33<\/td><th>DAYN&emsp;<\/th><td>20040930&emsp;<\/td><\/tr><tr><td>34<\/td><th>NDAYS&emsp;<\/th><td>17897&emsp;<\/td><\/tr><tr><td>35<\/td><th>NDAYSGT0&emsp;<\/th><td>17897&emsp;<\/td><\/tr><tr><td>36<\/td><th>MIN_&emsp;<\/th><td> 1.4&emsp;<\/td><\/tr><tr><td>37<\/td><th>P1&emsp;<\/th><td> 7.0&emsp;<\/td><\/tr><tr><td>38<\/td><th>P5&emsp;<\/th><td>11.0&emsp;<\/td><\/tr><tr><td>39<\/td><th>P10&emsp;<\/th><td>15.0&emsp;<\/td><\/tr><tr><td>40<\/td><th>P20&emsp;<\/th><td>24.0&emsp;<\/td><\/tr><tr><td>41<\/td><th>P25&emsp;<\/th><td>31.0&emsp;<\/td><\/tr><tr><td>42<\/td><th>P30&emsp;<\/th><td>41.0&emsp;<\/td><\/tr><tr><td>43<\/td><th>P40&emsp;<\/th><td> 80.00&emsp;<\/td><\/tr><tr><td>44<\/td><th>P50&emsp;<\/th><td>156&emsp;<\/td><\/tr><tr><td>45<\/td><th>P60&emsp;<\/th><td>260.0&emsp;<\/td><\/tr><tr><td>46<\/td><th>P70&emsp;<\/th><td>422.6&emsp;<\/td><\/tr><tr><td>47<\/td><th>P75&emsp;<\/th><td>540.00&emsp;<\/td><\/tr><tr><td>48<\/td><th>P80&emsp;<\/th><td> 691&emsp;<\/td><\/tr><tr><td>49<\/td><th>P90&emsp;<\/th><td>1240.0&emsp;<\/td><\/tr><tr><td>50<\/td><th>P95&emsp;<\/th><td>1880.0&emsp;<\/td><\/tr><tr><td>51<\/td><th>P99&emsp;<\/th><td>3680&emsp;<\/td><\/tr><tr><td>52<\/td><th>MAX_&emsp;<\/th><td>11300&emsp;<\/td><\/tr><tr><td>53<\/td><th>AVE&emsp;<\/th><td>450.708&emsp;<\/td><\/tr><tr><td>54<\/td><th>STDEV_&emsp;<\/th><td> 765.328&emsp;<\/td><\/tr><tr><td>55<\/td><th>GOTQ&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>56<\/td><th>HUC&emsp;<\/th><td>17090003&emsp;<\/td><\/tr><tr><td>57<\/td><th>HUC_REG&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>58<\/td><th>SUBREGION&emsp;<\/th><td>1709&emsp;<\/td><\/tr><tr><td>59<\/td><th>ACCOUNTING&emsp;<\/th><td>170900&emsp;<\/td><\/tr><tr><td>60<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>FID_&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>2<\/td><th>COMID&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>3<\/td><th>EVENTDATE&emsp;<\/th><td>11/21/2006 0:00:00&emsp;<\/td><\/tr><tr><td>4<\/td><th>REACHCODE&emsp;<\/th><td>1.709000e+13&emsp;<\/td><\/tr><tr><td>5<\/td><th>REACHSMDAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>6<\/td><th>REACHRESOL&emsp;<\/th><td>medium&emsp;<\/td><\/tr><tr><td>7<\/td><th>FEATURECOM&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>8<\/td><th>FEATURECLA&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>9<\/td><th>SOURCE_ORI&emsp;<\/th><td>USGS, Water Resources Division&emsp;<\/td><\/tr><tr><td>10<\/td><th>SOURCE_DAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>11<\/td><th>SOURCE_FEA&emsp;<\/th><td>14170500&emsp;<\/td><\/tr><tr><td>12<\/td><th>FEATUREDET&emsp;<\/th><td>http://waterdata.usgs.gov/nwis/nwisman/?site_no=14170500&emsp;<\/td><\/tr><tr><td>13<\/td><th>MEASURE&emsp;<\/th><td>22.15947&emsp;<\/td><\/tr><tr><td>14<\/td><th>OFFSET&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>15<\/td><th>EVENTTYPE&emsp;<\/th><td>StreamGage&emsp;<\/td><\/tr><tr><td>16<\/td><th>AGENCY_CD&emsp;<\/th><td>USGS&emsp;<\/td><\/tr><tr><td>17<\/td><th>STATION_NM&emsp;<\/th><td>ROCK CREEK NEAR PHILOMATH,OREG.&emsp;<\/td><\/tr><tr><td>18<\/td><th>STATE_CD&emsp;<\/th><td>41&emsp;<\/td><\/tr><tr><td>19<\/td><th>STATE&emsp;<\/th><td>OR&emsp;<\/td><\/tr><tr><td>20<\/td><th>SITESTATUS&emsp;<\/th><td>I&emsp;<\/td><\/tr><tr><td>21<\/td><th>DA_SQ_MILE&emsp;<\/th><td> 14.6&emsp;<\/td><\/tr><tr><td>22<\/td><th>LON_SITE&emsp;<\/th><td>-123.4401&emsp;<\/td><\/tr><tr><td>23<\/td><th>LAT_SITE&emsp;<\/th><td>44.50123&emsp;<\/td><\/tr><tr><td>24<\/td><th>LON_NHD&emsp;<\/th><td>-123.4406&emsp;<\/td><\/tr><tr><td>25<\/td><th>LAT_NHD&emsp;<\/th><td>44.50059&emsp;<\/td><\/tr><tr><td>26<\/td><th>NHD2GAGE_D&emsp;<\/th><td> 80.412&emsp;<\/td><\/tr><tr><td>27<\/td><th>REVIEWED&emsp;<\/th><td>Y&emsp;<\/td><\/tr><tr><td>28<\/td><th>BFIYRS&emsp;<\/th><td>12&emsp;<\/td><\/tr><tr><td>29<\/td><th>BFI_AVE&emsp;<\/th><td>0.463&emsp;<\/td><\/tr><tr><td>30<\/td><th>BFI_STDEV&emsp;<\/th><td>0.074&emsp;<\/td><\/tr><tr><td>31<\/td><th>GOTBFI&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>32<\/td><th>DAY1&emsp;<\/th><td>19451001&emsp;<\/td><\/tr><tr><td>33<\/td><th>DAYN&emsp;<\/th><td>19790930&emsp;<\/td><\/tr><tr><td>34<\/td><th>NDAYS&emsp;<\/th><td> 4383&emsp;<\/td><\/tr><tr><td>35<\/td><th>NDAYSGT0&emsp;<\/th><td> 4383&emsp;<\/td><\/tr><tr><td>36<\/td><th>MIN_&emsp;<\/th><td> 0.2&emsp;<\/td><\/tr><tr><td>37<\/td><th>P1&emsp;<\/th><td> 0.3&emsp;<\/td><\/tr><tr><td>38<\/td><th>P5&emsp;<\/th><td> 0.6&emsp;<\/td><\/tr><tr><td>39<\/td><th>P10&emsp;<\/th><td> 1.3&emsp;<\/td><\/tr><tr><td>40<\/td><th>P20&emsp;<\/th><td> 2.9&emsp;<\/td><\/tr><tr><td>41<\/td><th>P25&emsp;<\/th><td> 3.5&emsp;<\/td><\/tr><tr><td>42<\/td><th>P30&emsp;<\/th><td> 4.9&emsp;<\/td><\/tr><tr><td>43<\/td><th>P40&emsp;<\/th><td>  9.26&emsp;<\/td><\/tr><tr><td>44<\/td><th>P50&emsp;<\/th><td> 18&emsp;<\/td><\/tr><tr><td>45<\/td><th>P60&emsp;<\/th><td> 32.0&emsp;<\/td><\/tr><tr><td>46<\/td><th>P70&emsp;<\/th><td> 53.0&emsp;<\/td><\/tr><tr><td>47<\/td><th>P75&emsp;<\/th><td> 66.00&emsp;<\/td><\/tr><tr><td>48<\/td><th>P80&emsp;<\/th><td>  82&emsp;<\/td><\/tr><tr><td>49<\/td><th>P90&emsp;<\/th><td> 139.0&emsp;<\/td><\/tr><tr><td>50<\/td><th>P95&emsp;<\/th><td> 204.8&emsp;<\/td><\/tr><tr><td>51<\/td><th>P99&emsp;<\/th><td> 396&emsp;<\/td><\/tr><tr><td>52<\/td><th>MAX_&emsp;<\/th><td>  925&emsp;<\/td><\/tr><tr><td>53<\/td><th>AVE&emsp;<\/th><td> 51.161&emsp;<\/td><\/tr><tr><td>54<\/td><th>STDEV_&emsp;<\/th><td>  82.945&emsp;<\/td><\/tr><tr><td>55<\/td><th>GOTQ&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>56<\/td><th>HUC&emsp;<\/th><td>17090003&emsp;<\/td><\/tr><tr><td>57<\/td><th>HUC_REG&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>58<\/td><th>SUBREGION&emsp;<\/th><td>1709&emsp;<\/td><\/tr><tr><td>59<\/td><th>ACCOUNTING&emsp;<\/th><td>170900&emsp;<\/td><\/tr><tr><td>60<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>FID_&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>2<\/td><th>COMID&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>3<\/td><th>EVENTDATE&emsp;<\/th><td>11/21/2006 0:00:00&emsp;<\/td><\/tr><tr><td>4<\/td><th>REACHCODE&emsp;<\/th><td>1.709000e+13&emsp;<\/td><\/tr><tr><td>5<\/td><th>REACHSMDAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>6<\/td><th>REACHRESOL&emsp;<\/th><td>medium&emsp;<\/td><\/tr><tr><td>7<\/td><th>FEATURECOM&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>8<\/td><th>FEATURECLA&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>9<\/td><th>SOURCE_ORI&emsp;<\/th><td>USGS, Water Resources Division&emsp;<\/td><\/tr><tr><td>10<\/td><th>SOURCE_DAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>11<\/td><th>SOURCE_FEA&emsp;<\/th><td>14171500&emsp;<\/td><\/tr><tr><td>12<\/td><th>FEATUREDET&emsp;<\/th><td>http://waterdata.usgs.gov/nwis/nwisman/?site_no=14171500&emsp;<\/td><\/tr><tr><td>13<\/td><th>MEASURE&emsp;<\/th><td>42.76202&emsp;<\/td><\/tr><tr><td>14<\/td><th>OFFSET&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>15<\/td><th>EVENTTYPE&emsp;<\/th><td>StreamGage&emsp;<\/td><\/tr><tr><td>16<\/td><th>AGENCY_CD&emsp;<\/th><td>USGS&emsp;<\/td><\/tr><tr><td>17<\/td><th>STATION_NM&emsp;<\/th><td>MUDDY CREEK NEAR CORVALLIS, OREG.&emsp;<\/td><\/tr><tr><td>18<\/td><th>STATE_CD&emsp;<\/th><td>41&emsp;<\/td><\/tr><tr><td>19<\/td><th>STATE&emsp;<\/th><td>OR&emsp;<\/td><\/tr><tr><td>20<\/td><th>SITESTATUS&emsp;<\/th><td>I&emsp;<\/td><\/tr><tr><td>21<\/td><th>DA_SQ_MILE&emsp;<\/th><td>107.0&emsp;<\/td><\/tr><tr><td>22<\/td><th>LON_SITE&emsp;<\/th><td>-123.3304&emsp;<\/td><\/tr><tr><td>23<\/td><th>LAT_SITE&emsp;<\/th><td>44.49707&emsp;<\/td><\/tr><tr><td>24<\/td><th>LON_NHD&emsp;<\/th><td>-123.3306&emsp;<\/td><\/tr><tr><td>25<\/td><th>LAT_NHD&emsp;<\/th><td>44.49709&emsp;<\/td><\/tr><tr><td>26<\/td><th>NHD2GAGE_D&emsp;<\/th><td> 16.419&emsp;<\/td><\/tr><tr><td>27<\/td><th>REVIEWED&emsp;<\/th><td>Y&emsp;<\/td><\/tr><tr><td>28<\/td><th>BFIYRS&emsp;<\/th><td> 5&emsp;<\/td><\/tr><tr><td>29<\/td><th>BFI_AVE&emsp;<\/th><td>0.397&emsp;<\/td><\/tr><tr><td>30<\/td><th>BFI_STDEV&emsp;<\/th><td>0.042&emsp;<\/td><\/tr><tr><td>31<\/td><th>GOTBFI&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>32<\/td><th>DAY1&emsp;<\/th><td>19631001&emsp;<\/td><\/tr><tr><td>33<\/td><th>DAYN&emsp;<\/th><td>19680930&emsp;<\/td><\/tr><tr><td>34<\/td><th>NDAYS&emsp;<\/th><td> 1827&emsp;<\/td><\/tr><tr><td>35<\/td><th>NDAYSGT0&emsp;<\/th><td> 1827&emsp;<\/td><\/tr><tr><td>36<\/td><th>MIN_&emsp;<\/th><td> 0.7&emsp;<\/td><\/tr><tr><td>37<\/td><th>P1&emsp;<\/th><td> 1.1&emsp;<\/td><\/tr><tr><td>38<\/td><th>P5&emsp;<\/th><td> 1.9&emsp;<\/td><\/tr><tr><td>39<\/td><th>P10&emsp;<\/th><td> 3.2&emsp;<\/td><\/tr><tr><td>40<\/td><th>P20&emsp;<\/th><td> 6.6&emsp;<\/td><\/tr><tr><td>41<\/td><th>P25&emsp;<\/th><td> 8.9&emsp;<\/td><\/tr><tr><td>42<\/td><th>P30&emsp;<\/th><td>12.0&emsp;<\/td><\/tr><tr><td>43<\/td><th>P40&emsp;<\/th><td> 24.00&emsp;<\/td><\/tr><tr><td>44<\/td><th>P50&emsp;<\/th><td> 48&emsp;<\/td><\/tr><tr><td>45<\/td><th>P60&emsp;<\/th><td> 88.0&emsp;<\/td><\/tr><tr><td>46<\/td><th>P70&emsp;<\/th><td>168.0&emsp;<\/td><\/tr><tr><td>47<\/td><th>P75&emsp;<\/th><td>215.00&emsp;<\/td><\/tr><tr><td>48<\/td><th>P80&emsp;<\/th><td> 270&emsp;<\/td><\/tr><tr><td>49<\/td><th>P90&emsp;<\/th><td> 502.8&emsp;<\/td><\/tr><tr><td>50<\/td><th>P95&emsp;<\/th><td> 904.4&emsp;<\/td><\/tr><tr><td>51<\/td><th>P99&emsp;<\/th><td>2296&emsp;<\/td><\/tr><tr><td>52<\/td><th>MAX_&emsp;<\/th><td> 5410&emsp;<\/td><\/tr><tr><td>53<\/td><th>AVE&emsp;<\/th><td>204.843&emsp;<\/td><\/tr><tr><td>54<\/td><th>STDEV_&emsp;<\/th><td> 441.511&emsp;<\/td><\/tr><tr><td>55<\/td><th>GOTQ&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>56<\/td><th>HUC&emsp;<\/th><td>17090003&emsp;<\/td><\/tr><tr><td>57<\/td><th>HUC_REG&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>58<\/td><th>SUBREGION&emsp;<\/th><td>1709&emsp;<\/td><\/tr><tr><td>59<\/td><th>ACCOUNTING&emsp;<\/th><td>170900&emsp;<\/td><\/tr><tr><td>60<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>FID_&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>2<\/td><th>COMID&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>3<\/td><th>EVENTDATE&emsp;<\/th><td>11/21/2006 0:00:00&emsp;<\/td><\/tr><tr><td>4<\/td><th>REACHCODE&emsp;<\/th><td>1.710021e+13&emsp;<\/td><\/tr><tr><td>5<\/td><th>REACHSMDAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>6<\/td><th>REACHRESOL&emsp;<\/th><td>medium&emsp;<\/td><\/tr><tr><td>7<\/td><th>FEATURECOM&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>8<\/td><th>FEATURECLA&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>9<\/td><th>SOURCE_ORI&emsp;<\/th><td>USGS, Water Resources Division&emsp;<\/td><\/tr><tr><td>10<\/td><th>SOURCE_DAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>11<\/td><th>SOURCE_FEA&emsp;<\/th><td>14306100&emsp;<\/td><\/tr><tr><td>12<\/td><th>FEATUREDET&emsp;<\/th><td>http://waterdata.usgs.gov/nwis/nwisman/?site_no=14306100&emsp;<\/td><\/tr><tr><td>13<\/td><th>MEASURE&emsp;<\/th><td>35.98480&emsp;<\/td><\/tr><tr><td>14<\/td><th>OFFSET&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>15<\/td><th>EVENTTYPE&emsp;<\/th><td>StreamGage&emsp;<\/td><\/tr><tr><td>16<\/td><th>AGENCY_CD&emsp;<\/th><td>USGS&emsp;<\/td><\/tr><tr><td>17<\/td><th>STATION_NM&emsp;<\/th><td>N FK ALSEA R AT ALSEA, OREG.&emsp;<\/td><\/tr><tr><td>18<\/td><th>STATE_CD&emsp;<\/th><td>41&emsp;<\/td><\/tr><tr><td>19<\/td><th>STATE&emsp;<\/th><td>OR&emsp;<\/td><\/tr><tr><td>20<\/td><th>SITESTATUS&emsp;<\/th><td>I&emsp;<\/td><\/tr><tr><td>21<\/td><th>DA_SQ_MILE&emsp;<\/th><td> 63.0&emsp;<\/td><\/tr><tr><td>22<\/td><th>LON_SITE&emsp;<\/th><td>-123.5957&emsp;<\/td><\/tr><tr><td>23<\/td><th>LAT_SITE&emsp;<\/th><td>44.37901&emsp;<\/td><\/tr><tr><td>24<\/td><th>LON_NHD&emsp;<\/th><td>-123.5951&emsp;<\/td><\/tr><tr><td>25<\/td><th>LAT_NHD&emsp;<\/th><td>44.37930&emsp;<\/td><\/tr><tr><td>26<\/td><th>NHD2GAGE_D&emsp;<\/th><td> 54.258&emsp;<\/td><\/tr><tr><td>27<\/td><th>REVIEWED&emsp;<\/th><td>Y&emsp;<\/td><\/tr><tr><td>28<\/td><th>BFIYRS&emsp;<\/th><td>32&emsp;<\/td><\/tr><tr><td>29<\/td><th>BFI_AVE&emsp;<\/th><td>0.459&emsp;<\/td><\/tr><tr><td>30<\/td><th>BFI_STDEV&emsp;<\/th><td>0.052&emsp;<\/td><\/tr><tr><td>31<\/td><th>GOTBFI&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>32<\/td><th>DAY1&emsp;<\/th><td>19571001&emsp;<\/td><\/tr><tr><td>33<\/td><th>DAYN&emsp;<\/th><td>19890930&emsp;<\/td><\/tr><tr><td>34<\/td><th>NDAYS&emsp;<\/th><td>11688&emsp;<\/td><\/tr><tr><td>35<\/td><th>NDAYSGT0&emsp;<\/th><td>11688&emsp;<\/td><\/tr><tr><td>36<\/td><th>MIN_&emsp;<\/th><td>12.0&emsp;<\/td><\/tr><tr><td>37<\/td><th>P1&emsp;<\/th><td>15.0&emsp;<\/td><\/tr><tr><td>38<\/td><th>P5&emsp;<\/th><td>19.0&emsp;<\/td><\/tr><tr><td>39<\/td><th>P10&emsp;<\/th><td>22.0&emsp;<\/td><\/tr><tr><td>40<\/td><th>P20&emsp;<\/th><td>29.0&emsp;<\/td><\/tr><tr><td>41<\/td><th>P25&emsp;<\/th><td>34.0&emsp;<\/td><\/tr><tr><td>42<\/td><th>P30&emsp;<\/th><td>43.0&emsp;<\/td><\/tr><tr><td>43<\/td><th>P40&emsp;<\/th><td> 70.00&emsp;<\/td><\/tr><tr><td>44<\/td><th>P50&emsp;<\/th><td>116&emsp;<\/td><\/tr><tr><td>45<\/td><th>P60&emsp;<\/th><td>180.0&emsp;<\/td><\/tr><tr><td>46<\/td><th>P70&emsp;<\/th><td>263.0&emsp;<\/td><\/tr><tr><td>47<\/td><th>P75&emsp;<\/th><td>320.75&emsp;<\/td><\/tr><tr><td>48<\/td><th>P80&emsp;<\/th><td> 399&emsp;<\/td><\/tr><tr><td>49<\/td><th>P90&emsp;<\/th><td> 704.0&emsp;<\/td><\/tr><tr><td>50<\/td><th>P95&emsp;<\/th><td>1050.0&emsp;<\/td><\/tr><tr><td>51<\/td><th>P99&emsp;<\/th><td>2180&emsp;<\/td><\/tr><tr><td>52<\/td><th>MAX_&emsp;<\/th><td>11600&emsp;<\/td><\/tr><tr><td>53<\/td><th>AVE&emsp;<\/th><td>275.391&emsp;<\/td><\/tr><tr><td>54<\/td><th>STDEV_&emsp;<\/th><td> 460.462&emsp;<\/td><\/tr><tr><td>55<\/td><th>GOTQ&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>56<\/td><th>HUC&emsp;<\/th><td>17100205&emsp;<\/td><\/tr><tr><td>57<\/td><th>HUC_REG&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>58<\/td><th>SUBREGION&emsp;<\/th><td>1710&emsp;<\/td><\/tr><tr><td>59<\/td><th>ACCOUNTING&emsp;<\/th><td>171002&emsp;<\/td><\/tr><tr><td>60<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>FID_&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>2<\/td><th>COMID&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>3<\/td><th>EVENTDATE&emsp;<\/th><td>11/21/2006 0:00:00&emsp;<\/td><\/tr><tr><td>4<\/td><th>REACHCODE&emsp;<\/th><td>1.710021e+13&emsp;<\/td><\/tr><tr><td>5<\/td><th>REACHSMDAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>6<\/td><th>REACHRESOL&emsp;<\/th><td>medium&emsp;<\/td><\/tr><tr><td>7<\/td><th>FEATURECOM&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>8<\/td><th>FEATURECLA&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>9<\/td><th>SOURCE_ORI&emsp;<\/th><td>USGS, Water Resources Division&emsp;<\/td><\/tr><tr><td>10<\/td><th>SOURCE_DAT&emsp;<\/th><td>NA&emsp;<\/td><\/tr><tr><td>11<\/td><th>SOURCE_FEA&emsp;<\/th><td>14306200&emsp;<\/td><\/tr><tr><td>12<\/td><th>FEATUREDET&emsp;<\/th><td>http://waterdata.usgs.gov/nwis/nwisman/?site_no=14306200&emsp;<\/td><\/tr><tr><td>13<\/td><th>MEASURE&emsp;<\/th><td>28.18708&emsp;<\/td><\/tr><tr><td>14<\/td><th>OFFSET&emsp;<\/th><td>0&emsp;<\/td><\/tr><tr><td>15<\/td><th>EVENTTYPE&emsp;<\/th><td>StreamGage&emsp;<\/td><\/tr><tr><td>16<\/td><th>AGENCY_CD&emsp;<\/th><td>USGS&emsp;<\/td><\/tr><tr><td>17<\/td><th>STATION_NM&emsp;<\/th><td>S FK ALSEA R NR ALSEA, OREG.&emsp;<\/td><\/tr><tr><td>18<\/td><th>STATE_CD&emsp;<\/th><td>41&emsp;<\/td><\/tr><tr><td>19<\/td><th>STATE&emsp;<\/th><td>OR&emsp;<\/td><\/tr><tr><td>20<\/td><th>SITESTATUS&emsp;<\/th><td>I&emsp;<\/td><\/tr><tr><td>21<\/td><th>DA_SQ_MILE&emsp;<\/th><td> 49.5&emsp;<\/td><\/tr><tr><td>22<\/td><th>LON_SITE&emsp;<\/th><td>-123.5998&emsp;<\/td><\/tr><tr><td>23<\/td><th>LAT_SITE&emsp;<\/th><td>44.36512&emsp;<\/td><\/tr><tr><td>24<\/td><th>LON_NHD&emsp;<\/th><td>-123.5992&emsp;<\/td><\/tr><tr><td>25<\/td><th>LAT_NHD&emsp;<\/th><td>44.36586&emsp;<\/td><\/tr><tr><td>26<\/td><th>NHD2GAGE_D&emsp;<\/th><td> 97.017&emsp;<\/td><\/tr><tr><td>27<\/td><th>REVIEWED&emsp;<\/th><td>Y&emsp;<\/td><\/tr><tr><td>28<\/td><th>BFIYRS&emsp;<\/th><td> 3&emsp;<\/td><\/tr><tr><td>29<\/td><th>BFI_AVE&emsp;<\/th><td>0.516&emsp;<\/td><\/tr><tr><td>30<\/td><th>BFI_STDEV&emsp;<\/th><td>0.035&emsp;<\/td><\/tr><tr><td>31<\/td><th>GOTBFI&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>32<\/td><th>DAY1&emsp;<\/th><td>19601001&emsp;<\/td><\/tr><tr><td>33<\/td><th>DAYN&emsp;<\/th><td>19630930&emsp;<\/td><\/tr><tr><td>34<\/td><th>NDAYS&emsp;<\/th><td> 1095&emsp;<\/td><\/tr><tr><td>35<\/td><th>NDAYSGT0&emsp;<\/th><td> 1095&emsp;<\/td><\/tr><tr><td>36<\/td><th>MIN_&emsp;<\/th><td> 8.5&emsp;<\/td><\/tr><tr><td>37<\/td><th>P1&emsp;<\/th><td> 9.8&emsp;<\/td><\/tr><tr><td>38<\/td><th>P5&emsp;<\/th><td>12.0&emsp;<\/td><\/tr><tr><td>39<\/td><th>P10&emsp;<\/th><td>14.0&emsp;<\/td><\/tr><tr><td>40<\/td><th>P20&emsp;<\/th><td>19.0&emsp;<\/td><\/tr><tr><td>41<\/td><th>P25&emsp;<\/th><td>23.0&emsp;<\/td><\/tr><tr><td>42<\/td><th>P30&emsp;<\/th><td>28.0&emsp;<\/td><\/tr><tr><td>43<\/td><th>P40&emsp;<\/th><td> 51.00&emsp;<\/td><\/tr><tr><td>44<\/td><th>P50&emsp;<\/th><td> 88&emsp;<\/td><\/tr><tr><td>45<\/td><th>P60&emsp;<\/th><td>123.2&emsp;<\/td><\/tr><tr><td>46<\/td><th>P70&emsp;<\/th><td>161.0&emsp;<\/td><\/tr><tr><td>47<\/td><th>P75&emsp;<\/th><td>187.00&emsp;<\/td><\/tr><tr><td>48<\/td><th>P80&emsp;<\/th><td> 239&emsp;<\/td><\/tr><tr><td>49<\/td><th>P90&emsp;<\/th><td> 419.8&emsp;<\/td><\/tr><tr><td>50<\/td><th>P95&emsp;<\/th><td> 581.6&emsp;<\/td><\/tr><tr><td>51<\/td><th>P99&emsp;<\/th><td>1342&emsp;<\/td><\/tr><tr><td>52<\/td><th>MAX_&emsp;<\/th><td> 3110&emsp;<\/td><\/tr><tr><td>53<\/td><th>AVE&emsp;<\/th><td>166.242&emsp;<\/td><\/tr><tr><td>54<\/td><th>STDEV_&emsp;<\/th><td> 255.881&emsp;<\/td><\/tr><tr><td>55<\/td><th>GOTQ&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>56<\/td><th>HUC&emsp;<\/th><td>17100205&emsp;<\/td><\/tr><tr><td>57<\/td><th>HUC_REG&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>58<\/td><th>SUBREGION&emsp;<\/th><td>1710&emsp;<\/td><\/tr><tr><td>59<\/td><th>ACCOUNTING&emsp;<\/th><td>171002&emsp;<\/td><\/tr><tr><td>60<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["752.922","207.073","450.708","51.161","204.843","275.391","166.242"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-123.599827,44.3129,-123.296485,44.716229,true,"gages_benton - AVE","Zoom to gages_benton - AVE","<strong> gages_benton - AVE <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#4B0055 , #462165 6.95949190678878%, #304C83 21.2093576018046%, #047594 35.4592232968204%, #019A95 49.7090889918363%, #07B881 63.9589546868521%, #7BD05D 78.2088203818679%, #D1DF3F 92.4586860768837%, #FDE333 "],"labels":["100","200","300","400","500","600","700"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"numeric","title":"gages_benton - AVE","extra":{"p_1":0.0695949190678878,"p_n":0.924586860768837},"layerId":null,"className":"info legend","group":"gages_benton - AVE"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-123.816709,-123.776615,-123.734996,-123.735153,-123.715538,-123.715675,-123.715866,-123.72014,-123.720065,-123.720071,-123.699976,-123.68952,-123.679097,-123.66875,-123.648669,-123.608115,-123.597677,-123.59763,-123.597233,-123.596134,-123.596674,-123.596919,-123.596929,-123.602817,-123.602794,-123.603143,-123.602609,-123.580966,-123.54132,-123.47056,-123.438419,-123.414116,-123.409764,-123.339138,-123.316612,-123.301882,-123.240276,-123.23521,-123.221593,-123.201917,-123.182025,-123.149025,-123.147507,-123.147489,-123.145982,-123.143316,-123.1366,-123.133244,-123.126206,-123.12453,-123.121299,-123.119339,-123.119212,-123.116892,-123.114522,-123.111736,-123.105532,-123.100643,-123.092509,-123.089254,-123.087313,-123.086173,-123.084184,-123.07836,-123.074838,-123.073643,-123.073132,-123.074291,-123.078206,-123.088313,-123.095339,-123.09675,-123.101193,-123.105311,-123.105836,-123.108685,-123.110063,-123.112528,-123.119519,-123.121978,-123.126206,-123.133623,-123.136988,-123.14252,-123.150434,-123.15707,-123.16132,-123.164428,-123.17088,-123.171739,-123.172124,-123.171855,-123.169674,-123.17011,-123.171626,-123.174226,-123.179922,-123.181816,-123.183175,-123.183449,-123.182812,-123.18291,-123.18392,-123.187849,-123.19519,-123.198028,-123.198645,-123.198355,-123.19701,-123.191431,-123.18719,-123.184161,-123.183202,-123.183011,-123.185375,-123.18564,-123.19195,-123.195441,-123.203044,-123.206301,-123.214573,-123.221793,-123.227875,-123.232606,-123.251209,-123.251831,-123.25212,-123.253373,-123.254317,-123.256178,-123.260251,-123.260791,-123.260739,-123.260151,-123.250991,-123.247404,-123.24292,-123.242113,-123.241754,-123.24579,-123.248391,-123.250254,-123.253376,-123.251728,-123.250029,-123.245055,-123.240081,-123.238067,-123.233093,-123.231079,-123.228001,-123.22581,-123.222672,-123.218023,-123.214683,-123.212619,-123.211967,-123.214343,-123.215082,-123.214409,-123.214778,-123.219354,-123.221019,-123.220156,-123.219144,-123.214276,-123.213426,-123.213992,-123.216169,-123.216462,-123.213822,-123.211785,-123.211866,-123.211306,-123.209831,-123.208492,-123.206962,-123.206317,-123.205287,-123.207587,-123.209194,-123.212903,-123.215459,-123.21886,-123.224857,-123.227466,-123.228054,-123.227685,-123.225841,-123.222195,-123.21938,-123.219345,-123.220377,-123.222904,-123.226797,-123.229311,-123.229065,-123.227035,-123.225099,-123.22345,-123.223614,-123.229297,-123.233258,-123.235868,-123.238668,-123.242821,-123.24461,-123.245088,-123.242288,-123.239283,-123.23416,-123.230813,-123.22595,-123.223754,-123.221167,-123.219011,-123.219661,-123.222699,-123.226797,-123.229529,-123.23319,-123.235048,-123.235102,-123.233245,-123.230581,-123.229399,-123.228599,-123.228518,-123.229898,-123.232316,-123.237425,-123.240744,-123.245334,-123.245678,-123.244844,-123.239365,-123.236564,-123.229862,-123.224557,-123.220295,-123.21691,-123.217585,-123.216802,-123.217302,-123.216178,-123.214125,-123.211304,-123.204394,-123.200105,-123.197359,-123.193766,-123.193097,-123.193752,-123.190897,-123.18975,-123.190365,-123.193657,-123.193575,-123.191102,-123.187851,-123.183671,-123.180388,-123.200385,-123.224885,-123.230044,-123.248679,-123.288655,-123.328667,-123.367696,-123.371408,-123.371411,-123.451272,-123.455686,-123.471685,-123.472186,-123.532858,-123.556039,-123.573614,-123.59329,-123.593513,-123.715377,-123.715386,-123.723588,-123.767931,-123.775598,-123.775836,-123.775789,-123.816525,-123.816709],"lat":[44.344622,44.344546,44.345778,44.36035,44.360458,44.379969,44.389495,44.389506,44.432329,44.433374,44.433788,44.433582,44.433928,44.432935,44.43342,44.433671,44.433109,44.46932,44.477454,44.477454,44.541804,44.545624,44.651139,44.651159,44.702125,44.709242,44.721154,44.719415,44.72127,44.720722,44.720622,44.720552,44.720531,44.720059,44.719994,44.719835,44.719914,44.720146,44.720125,44.720099,44.720085,44.720225,44.717047,44.714848,44.711407,44.70831,44.702178,44.700002,44.696014,44.693903,44.691353,44.684493,44.682083,44.676966,44.675549,44.674826,44.674763,44.675959,44.675887,44.674727,44.672546,44.66814,44.665294,44.662326,44.659373,44.657331,44.652359,44.649613,44.646585,44.643195,44.641107,44.640814,44.639818,44.639202,44.63915,44.639262,44.639801,44.640594,44.640896,44.640363,44.639291,44.638056,44.637775,44.63787,44.637507,44.637269,44.637619,44.637507,44.634245,44.632428,44.628866,44.62779,44.624542,44.622674,44.621011,44.620036,44.619901,44.619,44.61745,44.616087,44.613029,44.611036,44.609246,44.60723,44.604953,44.602857,44.60042,44.599046,44.59756,44.595896,44.595583,44.594289,44.593077,44.590002,44.587298,44.587179,44.585814,44.585615,44.586063,44.586028,44.585376,44.584597,44.583056,44.581496,44.574626,44.574095,44.573848,44.572781,44.571477,44.566167,44.559351,44.557491,44.556365,44.555148,44.551983,44.550583,44.548154,44.547324,44.544575,44.539654,44.536969,44.532434,44.52887,44.526486,44.525947,44.526172,44.528059,44.527969,44.524644,44.522623,44.516608,44.513286,44.510982,44.51022,44.507681,44.504978,44.501218,44.495079,44.494188,44.491014,44.488627,44.486962,44.484751,44.482585,44.481805,44.479649,44.476371,44.473803,44.471695,44.468473,44.460622,44.457143,44.452756,44.450269,44.448576,44.447397,44.446304,44.445745,44.443038,44.437074,44.435239,44.434572,44.434638,44.434205,44.434126,44.433293,44.431889,44.42996,44.426664,44.422371,44.419436,44.416461,44.415712,44.416941,44.417256,44.415073,44.412661,44.404712,44.39935,44.395505,44.393452,44.388135,44.386089,44.385229,44.384887,44.385352,44.384552,44.381779,44.377715,44.374888,44.37205,44.371131,44.370322,44.36901,44.366149,44.362497,44.35993,44.359588,44.360124,44.359847,44.358396,44.356979,44.354622,44.352618,44.348468,44.345995,44.344606,44.342591,44.340852,44.339869,44.338879,44.337789,44.33363,44.332099,44.330984,44.329186,44.328999,44.330779,44.331266,44.32943,44.324952,44.32066,44.317272,44.313726,44.310808,44.309747,44.309222,44.308716,44.308829,44.308573,44.306974,44.305646,44.303354,44.29984,44.295892,44.294963,44.292272,44.290742,44.287587,44.285562,44.28493,44.283725,44.283725,44.283725,44.283725,44.283726,44.283724,44.283725,44.283719,44.283725,44.281021,44.280496,44.280647,44.281185,44.281471,44.281523,44.281402,44.282597,44.281915,44.276699,44.280267,44.283946,44.283944,44.283606,44.283547,44.2872,44.316167,44.315303,44.344622]}]]],null,"benton",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#000000","weight":2,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.07,"smoothFactor":1,"noClip":false},"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>247&emsp;<\/td><\/tr><tr><td>1<\/td><th>STATEFP&emsp;<\/th><td>41&emsp;<\/td><\/tr><tr><td>2<\/td><th>COUNTYFP&emsp;<\/th><td>003&emsp;<\/td><\/tr><tr><td>3<\/td><th>COUNTYNS&emsp;<\/th><td>01155126&emsp;<\/td><\/tr><tr><td>4<\/td><th>AFFGEOID&emsp;<\/th><td>0500000US41003&emsp;<\/td><\/tr><tr><td>5<\/td><th>GEOID&emsp;<\/th><td>41003&emsp;<\/td><\/tr><tr><td>6<\/td><th>NAME&emsp;<\/th><td>Benton&emsp;<\/td><\/tr><tr><td>7<\/td><th>LSAD&emsp;<\/th><td>06&emsp;<\/td><\/tr><tr><td>8<\/td><th>ALAND&emsp;<\/th><td>1748712549&emsp;<\/td><\/tr><tr><td>9<\/td><th>AWATER&emsp;<\/th><td>7740248&emsp;<\/td><\/tr><tr><td>10<\/td><th>geometry&emsp;<\/th><td>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"247",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":0.9,"fillOpacity":0.098,"bringToFront":false,"sendToBack":false}]},{"method":"addHomeButton","args":[-123.816709,44.276699,-123.073132,44.72127,true,"benton","Zoom to benton","<strong> benton <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],["gages_benton - AVE","benton"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["benton"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"benton"}]},{"method":"addHomeButton","args":[-123.816709,44.276699,-123.073132,44.72127,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[44.3129,44.716229],"lng":[-123.599827,-123.296485]},"fitBounds":[44.276699,-123.816709,44.72127,-123.073132,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
<div id="adding-web-map-services-in-mapview" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Adding Web Map services in <code>mapview</code></h2>
<p>We’ll visualize data with mapview and load web map layers alongside using <code>mapview</code> and underlying <code>leaflet</code> functionality.</p>
<p>First we load load an excel file containing coordinate information in a known projection and promote to an <code>sf</code> spatial data frame.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="visualizing-spatial-data.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Rspatialworkshop)</span>
<span id="cb12-2"><a href="visualizing-spatial-data.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb12-3"><a href="visualizing-spatial-data.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb12-4"><a href="visualizing-spatial-data.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb12-5"><a href="visualizing-spatial-data.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview)</span>
<span id="cb12-6"><a href="visualizing-spatial-data.html#cb12-6" aria-hidden="true" tabindex="-1"></a>fpath <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;Station_Locations.xlsx&quot;</span>, <span class="at">package=</span><span class="st">&quot;Rspatialworkshop&quot;</span>)</span>
<span id="cb12-7"><a href="visualizing-spatial-data.html#cb12-7" aria-hidden="true" tabindex="-1"></a>stations <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(fpath)</span>
<span id="cb12-8"><a href="visualizing-spatial-data.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(stations)</span></code></pre></div>
<pre><code>## Rows: 31
## Columns: 3
## $ Station &lt;chr&gt; &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;,~
## $ x       &lt;dbl&gt; -2140749, -2140111, -2124688, -2125545, -1664112, 1606578, -17~
## $ y       &lt;dbl&gt; 2502887, 2469697, 2533842, 2556987, 2770644, 2698398, 2664873,~</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="visualizing-spatial-data.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stations<span class="sc">$</span>x)</span></code></pre></div>
<pre><code>##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max.     NA&#39;s 
## -2259078 -2124688 -1561956 -1630593 -1454137  1606578        2</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="visualizing-spatial-data.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># common clean up steps for spatial data - we can&#39;t use data missing coordinates so drop those records</span></span>
<span id="cb16-2"><a href="visualizing-spatial-data.html#cb16-2" aria-hidden="true" tabindex="-1"></a>stations <span class="ot">&lt;-</span> stations[<span class="fu">complete.cases</span>(stations),]</span>
<span id="cb16-3"><a href="visualizing-spatial-data.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># often spatial data in projected coordinates will have missing negative values for x values - common thing to fix:</span></span>
<span id="cb16-4"><a href="visualizing-spatial-data.html#cb16-4" aria-hidden="true" tabindex="-1"></a>stations<span class="sc">$</span>x[stations<span class="sc">$</span>x <span class="sc">&gt;</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="sc">-</span> stations<span class="sc">$</span>x[stations<span class="sc">$</span>x <span class="sc">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb16-5"><a href="visualizing-spatial-data.html#cb16-5" aria-hidden="true" tabindex="-1"></a>stations <span class="ot">&lt;-</span> stations <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href="visualizing-spatial-data.html#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>), <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb16-7"><a href="visualizing-spatial-data.html#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="visualizing-spatial-data.html#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># in this case we know the particular Albers projection and have the information as a proj string</span></span>
<span id="cb16-9"><a href="visualizing-spatial-data.html#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(stations) <span class="ot">&lt;-</span> <span class="st">&quot;+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs&quot;</span> </span></code></pre></div>
<p>Basic interactive map of our spatial stations with <code>mapview</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="visualizing-spatial-data.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(stations)</span></code></pre></div>
<div id="htmlwidget-7001fb21c0d9686e9729" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-7001fb21c0d9686e9729">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[42.8011150031217,42.517303063935,43.1071482502416,43.3041948917605,46.2063613448566,45.6866233124207,45.0105989334597,44.4619507750475,44.9781567645211,39.8964269614808,41.2589282611985,41.7297135918782,45.8104662676298,47.8266137385299,48.4958037892875,44.3916297088421,45.2157054829146,44.8308264001152,45.7859123714838,45.2705308168556,45.3696480960117,43.8084174160629,44.5982763454604,39.7257816578338,37.9164770224675,46.4214508837516,46.6066014509315,46.7903421720551,45.8880278858312],[-122.672593710233,-122.552500364392,-122.587887516675,-122.67725581031,-117.70711785015,-116.778198943422,-118.995438482767,-120.537577729693,-118.758096605037,-123.020015324828,-123.32078671942,-123.424438798457,-114.170997278969,-114.677073410619,-114.126745837242,-115.373097027398,-115.809938429752,-115.704933637178,-116.222688089527,-115.845008977929,-114.689087867826,-119.386733361491,-111.750350030581,-121.708629185346,-119.659845813898,-114.524952612336,-114.615727230359,-115.220486305268,-116.034974323353],6,null,"stations",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2140749&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2502887&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2140111&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2469697&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>3&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2124688&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2533842&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>4&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2125545&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2556987&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>5&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1664112&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2770644&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>6&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1606578&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2698398&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>7&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1792833&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2664873&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>8&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>8&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1926067&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2635857&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>9&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>9&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1775542&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2656911&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>10&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>10&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2259078&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2198706&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>11&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>11&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2240261&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2352240&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>12&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>12&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2233528&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2405201&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>13&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>13&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1405017&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2670553&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>14&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>14&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1400062&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2897059&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>15&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>15&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1345336&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2961481&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>16&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>16&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1528670&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2534332&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>17&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1543659&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2631193&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>18&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>18&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1544411&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2587583&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>19&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>19&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1561956&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2699910&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>20&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>20&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1545088&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2637728&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>21&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>21&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1454137&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2630283&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>22&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>22&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1855359&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2542403&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>23&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>23&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1241941&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2504150&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>24&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>24&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2157305&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2149843&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>25&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>25&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2039077&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>1908611&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>26&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>26&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1418910&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2742345&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>27&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>27&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1421780&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2763831&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>28&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>28&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1463259&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2792961&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>29&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>29&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1545301&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2707927&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-123.424438798457,37.9164770224675,-111.750350030581,48.4958037892875,true,"stations","Zoom to stations","<strong> stations <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"stations",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["stations"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"stations"}]}],"limits":{"lat":[37.9164770224675,48.4958037892875],"lng":[-123.424438798457,-111.750350030581]},"fitBounds":[37.9164770224675,-123.424438798457,48.4958037892875,-111.750350030581,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>We know of web mapping services for the National Hydrography dataset - these are stream site locations so imagine we want to visualize how closely these sites match a known rivers and stream network:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="visualizing-spatial-data.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb18-2"><a href="visualizing-spatial-data.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create a mapview object with our stations:</span></span>
<span id="cb18-3"><a href="visualizing-spatial-data.html#cb18-3" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">mapview</span>(stations, <span class="at">legend=</span><span class="cn">FALSE</span>)</span>
<span id="cb18-4"><a href="visualizing-spatial-data.html#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="visualizing-spatial-data.html#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># we configure the map attribute of our mapview object - try:</span></span>
<span id="cb18-6"><a href="visualizing-spatial-data.html#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;attributes(m) </span></span>
<span id="cb18-7"><a href="visualizing-spatial-data.html#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># to see those attributes</span></span>
<span id="cb18-8"><a href="visualizing-spatial-data.html#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="visualizing-spatial-data.html#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  The map attribute for mapview accepts leaflet methods - in this case we use addWMSTiles to add web map service tiles to the map</span></span>
<span id="cb18-10"><a href="visualizing-spatial-data.html#cb18-10" aria-hidden="true" tabindex="-1"></a>m<span class="sc">@</span>map <span class="ot">&lt;-</span> m<span class="sc">@</span>map <span class="sc">%&gt;%</span> <span class="fu">addWMSTiles</span>(<span class="at">group =</span> <span class="st">&#39;NHDPlus&#39;</span>,</span>
<span id="cb18-11"><a href="visualizing-spatial-data.html#cb18-11" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;https://watersgeo.epa.gov/arcgis/services/NHDPlus_NP21/NHDSnapshot_NP21/MapServer/WmsServer?&quot;</span>,</span>
<span id="cb18-12"><a href="visualizing-spatial-data.html#cb18-12" aria-hidden="true" tabindex="-1"></a>                              <span class="at">layers  =</span> <span class="dv">4</span>,</span>
<span id="cb18-13"><a href="visualizing-spatial-data.html#cb18-13" aria-hidden="true" tabindex="-1"></a>                              <span class="at">options =</span> <span class="fu">WMSTileOptions</span>(<span class="at">format =</span> <span class="st">&quot;image/png&quot;</span>, <span class="at">transparent =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-14"><a href="visualizing-spatial-data.html#cb18-14" aria-hidden="true" tabindex="-1"></a>                              <span class="at">attribution =</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">addWMSTiles</span>(<span class="at">group =</span> <span class="st">&#39;NHDPlusHR&#39;</span>,</span>
<span id="cb18-15"><a href="visualizing-spatial-data.html#cb18-15" aria-hidden="true" tabindex="-1"></a>                                                                <span class="st">&quot;https://hydro.nationalmap.gov/arcgis/services/NHDPlus_HR/MapServer/WMSServer?&quot;</span>,</span>
<span id="cb18-16"><a href="visualizing-spatial-data.html#cb18-16" aria-hidden="true" tabindex="-1"></a>                                                                <span class="at">layers  =</span> <span class="dv">9</span>,</span>
<span id="cb18-17"><a href="visualizing-spatial-data.html#cb18-17" aria-hidden="true" tabindex="-1"></a>                                                                <span class="at">options =</span> <span class="fu">WMSTileOptions</span>(<span class="at">format =</span> <span class="st">&quot;image/png&quot;</span>, <span class="at">transparent =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-18"><a href="visualizing-spatial-data.html#cb18-18" aria-hidden="true" tabindex="-1"></a>                                                                <span class="at">attribution =</span> <span class="st">&quot;&quot;</span>)  <span class="sc">%&gt;%</span> mapview<span class="sc">:::</span><span class="fu">mapViewLayersControl</span>(<span class="at">names =</span> <span class="fu">c</span>(<span class="st">&quot;NHDPlus&quot;</span>,<span class="st">&quot;NHDPlusHR&quot;</span>))</span>
<span id="cb18-19"><a href="visualizing-spatial-data.html#cb18-19" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<div id="htmlwidget-b48ae49ee07aabb42a61" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-b48ae49ee07aabb42a61">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[42.8011150031217,42.517303063935,43.1071482502416,43.3041948917605,46.2063613448566,45.6866233124207,45.0105989334597,44.4619507750475,44.9781567645211,39.8964269614808,41.2589282611985,41.7297135918782,45.8104662676298,47.8266137385299,48.4958037892875,44.3916297088421,45.2157054829146,44.8308264001152,45.7859123714838,45.2705308168556,45.3696480960117,43.8084174160629,44.5982763454604,39.7257816578338,37.9164770224675,46.4214508837516,46.6066014509315,46.7903421720551,45.8880278858312],[-122.672593710233,-122.552500364392,-122.587887516675,-122.67725581031,-117.70711785015,-116.778198943422,-118.995438482767,-120.537577729693,-118.758096605037,-123.020015324828,-123.32078671942,-123.424438798457,-114.170997278969,-114.677073410619,-114.126745837242,-115.373097027398,-115.809938429752,-115.704933637178,-116.222688089527,-115.845008977929,-114.689087867826,-119.386733361491,-111.750350030581,-121.708629185346,-119.659845813898,-114.524952612336,-114.615727230359,-115.220486305268,-116.034974323353],6,null,"stations",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2140749&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2502887&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2140111&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2469697&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>3&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2124688&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2533842&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>4&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2125545&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2556987&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>5&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1664112&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2770644&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>6&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1606578&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2698398&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>7&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1792833&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2664873&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>8&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>8&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1926067&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2635857&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>9&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>9&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1775542&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2656911&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>10&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>10&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2259078&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2198706&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>11&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>11&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2240261&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2352240&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>12&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>12&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2233528&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2405201&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>13&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>13&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1405017&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2670553&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>14&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>14&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1400062&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2897059&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>15&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>15&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1345336&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2961481&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>16&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>16&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1528670&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2534332&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>17&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1543659&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2631193&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>18&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>18&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1544411&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2587583&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>19&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>19&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1561956&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2699910&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>20&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>20&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1545088&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2637728&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>21&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>21&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1454137&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2630283&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>22&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>22&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1855359&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2542403&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>23&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>23&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1241941&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2504150&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>24&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>24&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2157305&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2149843&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>25&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>25&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-2039077&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>1908611&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>26&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>26&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1418910&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2742345&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>27&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>27&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1421780&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2763831&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>28&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>28&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1463259&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2792961&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>29&emsp;<\/td><\/tr><tr><td>1<\/td><th>Station&emsp;<\/th><td>29&emsp;<\/td><\/tr><tr><td>2<\/td><th>x&emsp;<\/th><td>-1545301&emsp;<\/td><\/tr><tr><td>3<\/td><th>y&emsp;<\/th><td>2707927&emsp;<\/td><\/tr><tr><td>4<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-123.424438798457,37.9164770224675,-111.750350030581,48.4958037892875,true,"stations","Zoom to stations","<strong> stations <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"stations",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addWMSTiles","args":["https://watersgeo.epa.gov/arcgis/services/NHDPlus_NP21/NHDSnapshot_NP21/MapServer/WmsServer?",null,"NHDPlus",{"styles":"","format":"image/png","transparent":true,"version":"1.1.1","attribution":"","layers":4}]},{"method":"addWMSTiles","args":["https://hydro.nationalmap.gov/arcgis/services/NHDPlus_HR/MapServer/WMSServer?",null,"NHDPlusHR",{"styles":"","format":"image/png","transparent":true,"version":"1.1.1","attribution":"","layers":9}]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],["stations","NHDPlus","NHDPlusHR"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[37.9164770224675,48.4958037892875],"lng":[-123.424438798457,-111.750350030581]},"fitBounds":[37.9164770224675,-123.424438798457,48.4958037892875,-111.750350030581,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
<div id="ggplot2" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> <code>ggplot2</code></h2>
<p>We’ve used this in simple examples throughout the workshop using <code>geom_sf</code> with <code>ggplot2</code>. If time we can try to make a polished map using <code>ggplot</code> using <a href="https://r-spatial.org/r/2018/10/25/ggplot2-sf-2.html">this post as a guide</a>.</p>
<div id="exercise-14" class="section level3" number="7.6.1">
<h3><span class="header-section-number">7.6.1</span> Exercise</h3>
<p>Using the example in post above, get counties for your state using <code>maps</code> package as shown in example - igonore the extra packages and some of the bells and whistles in the blog post, just try using a few of their ideas and adding a few of the ggplot parameters to make an interesting map with counties. Feel free to try adding some cities too if you want.</p>
</div>
<div id="solution-14" class="section level3" number="7.6.2">
<h3><span class="header-section-number">7.6.2</span> Solution</h3>
<p>One idea</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="visualizing-spatial-data.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb19-2"><a href="visualizing-spatial-data.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmaptools)</span>
<span id="cb19-3"><a href="visualizing-spatial-data.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb19-4"><a href="visualizing-spatial-data.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb19-5"><a href="visualizing-spatial-data.html#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="visualizing-spatial-data.html#cb19-6" aria-hidden="true" tabindex="-1"></a>counties <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(<span class="fu">map</span>(<span class="st">&quot;county&quot;</span>, <span class="at">plot =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>))</span>
<span id="cb19-7"><a href="visualizing-spatial-data.html#cb19-7" aria-hidden="true" tabindex="-1"></a>counties <span class="ot">&lt;-</span> <span class="fu">subset</span>(counties, <span class="fu">grepl</span>(<span class="st">&quot;oregon&quot;</span>, counties<span class="sc">$</span>ID))</span>
<span id="cb19-8"><a href="visualizing-spatial-data.html#cb19-8" aria-hidden="true" tabindex="-1"></a>counties<span class="sc">$</span>area <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">st_area</span>(counties))</span>
<span id="cb19-9"><a href="visualizing-spatial-data.html#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb19-10"><a href="visualizing-spatial-data.html#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> counties, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="fu">gray</span>(.<span class="dv">5</span>))  <span class="sc">+</span></span>
<span id="cb19-11"><a href="visualizing-spatial-data.html#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">125</span>, <span class="sc">-</span><span class="dv">115</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">47</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="R-User-Group-Spatial-Workshop-2021_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="visualizing-spatial-data.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggspatial)</span>
<span id="cb20-2"><a href="visualizing-spatial-data.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb20-3"><a href="visualizing-spatial-data.html#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> counties, <span class="fu">aes</span>(<span class="at">fill =</span> area))  <span class="sc">+</span></span>
<span id="cb20-4"><a href="visualizing-spatial-data.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">trans =</span> <span class="st">&quot;sqrt&quot;</span>, <span class="at">alpha =</span> .<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="visualizing-spatial-data.html#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">125</span>, <span class="sc">-</span><span class="dv">115</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">47</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb20-6"><a href="visualizing-spatial-data.html#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="fu">gray</span>(<span class="fl">0.5</span>), <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, </span>
<span id="cb20-7"><a href="visualizing-spatial-data.html#cb20-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="fl">0.5</span>), <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;aliceblue&quot;</span>)) <span class="sc">+</span></span>
<span id="cb20-8"><a href="visualizing-spatial-data.html#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotation_scale</span>(<span class="at">location =</span> <span class="st">&quot;bl&quot;</span>, <span class="at">width_hint =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb20-9"><a href="visualizing-spatial-data.html#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotation_north_arrow</span>(<span class="at">location =</span> <span class="st">&quot;tr&quot;</span>, <span class="at">which_north =</span> <span class="st">&quot;true&quot;</span>,</span>
<span id="cb20-10"><a href="visualizing-spatial-data.html#cb20-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">style =</span> north_arrow_fancy_orienteering)</span></code></pre></div>
<p><img src="R-User-Group-Spatial-Workshop-2021_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>

</div>
</div>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/lesson.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="geoprocessing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="extensions-to-work-with-gis-software-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-User-Group-Spatial-Workshop-2021.pdf", "R-User-Group-Spatial-Workshop-2021.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
